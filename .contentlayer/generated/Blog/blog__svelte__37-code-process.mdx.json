{
  "title": "Svelte从入门到精通——流程",
  "date": "2024-07-30T00:00:00.000Z",
  "tags": [
    "svelte"
  ],
  "body": {
    "raw": "\n本章笔者将演示Svelte从编译到运行的整体流程。\n\n这里笔者使用的Node版本为`18.15.0`。\n\n首先我们下载源码，然后把版本分支切换到`4.2.12`分支。\n```bash\ngit clone git@github.com:sveltejs/svelte.git\n```\n\n![项目结构](/images/svelte/37-45.png)\n\nSvelte使用的是`monorepo`的管理方式，首先我们参考README.md的建议安装依赖：\n```bash\npnpm install\n```\n\n然后我们进入到`sites/svelte.dev`目录，执行`pnpm run dev`。\n大概率会遇到这个问题：\n![alt text](/images/svelte/37-46.png)\n\n缺少sharp，我们按照提示安装：\n```bash\npnpm add --force @img/sharp-darwin-arm64\n```\n\n重新运行，遇到一个warning：\n![alt text](/images/svelte/37-47.png)\n\n这是因为`svelte.dev`下缺少了一个`.svelte-kit`目录。\n我们可以执行`pnpm run check`：\n![alt text](/images/svelte/37-48.png)\n\n里面的`svelte-kit sync`帮助我们同步下载这个目录。\n![alt text](/images/svelte/37-49.png)\n\n现在我们看到`svelte.dev`下已经有了`.svelte-kit`目录。\n![alt text](/images/svelte/37-50.png)\n\n我们重新运行下`pnpm run dev`，正常情况能运行起来。\n\n\n请读者朋友们结合本章内容和源码对比阅读，效果更佳。\n\n## compile阶段\n\n参照`svelte-loader`中的[逻辑](https://github.com/sveltejs/svelte-loader/blob/master/index.js):\n```javascript\nsvelte.preprocess(source, options.preprocess).then(processed => {\n  if (processed.dependencies && this.addDependency) {\n    for (let dependency of processed.dependencies) {\n      this.addDependency(dependency);\n    }\n  }\n\n  if (processed.map) compileOptions.sourcemap = processed.map;\n\n  const compiled = svelte.compile(processed.toString(), compileOptions);\n  let { js, css, warnings } = compiled;\n\n  callback(null, js.code, js.map);\n})\n```\n首先Svelte文件经过预处理，比如像要添加typescript支持等，然后调用`compile`，最后返回`js.code`。\n\n\n为了简单直观地查看到各个阶段的执行结果，我们在网站首页`sites/svelte.dev/src/routes/+layout.svelte`直接引入svelte编译器文件：\n```diff\n  import '@sveltejs/site-kit/styles/index.css';\n\n  import { browser } from '$app/environment';\n  import { page } from '$app/stores';\n  import { Icon, Shell, Banners } from '@sveltejs/site-kit/components';\n  import { Nav, Separator } from '@sveltejs/site-kit/nav';\n  import { Search, SearchBox } from '@sveltejs/site-kit/search';\n+ import { compile, preprocess } from '../../../../packages/svelte/src/compiler';\n```\n\n然后我们仿照`svelte-loader`的逻辑，先调用`preprocess`，然后把预处理的结果打印出来，因为我们本次重点在编译和运行，所以我们只是打印经过`preprocess`后的结果，在`compile`阶段，我们直接传入Svelte文件的字符串内容。\n```javascript\nlet str = `<script>\n  let count = 0;\n  const addCount = () => {\n    count++;\n  }\n<\\/script>\n\n<button on:click={addCount}>add</button>\ncount:{count}\n`;\npreprocess(str, {}).then(preResult => {\n  console.log('preprocess result', preResult);\n  let result = compile(str);\n  console.log('compile result', result);\n});\n```\n\n进入到网站目录`cd sites/svelte.dev`，执行`pnpm run dev`把网站跑起来，在控制台中查看打印结果：\n![alt text](/images/svelte/37-1.png)\n\n### parse\n`compile(str)`的内部逻辑首先是`parse`，地址：`packages/svelte/src/compiler/compile/index.js`。\n```javascript\n  console.log('svelte before parse', source);\n  const ast = parse(source, options);\n  console.log('svelte after parse', ast);\n```\n\n![alt text](/images/svelte/37-2.png)  \n`source`即是我们的模板字符串，即Svelte文件的内容。\n\n![alt text](/images/svelte/37-3.png)  \n经过转换后得到ast对象\n```javascript\nast = {\n  css: {}\n  html: {},\n  instance: {},\n  module: {}\n}\n```\n\n点击`parse`，进入到`packages/svelte/src/compiler/parse/index.js`。  \n`parse`内部有个`Parser`类，通过实例化该类，对模板字符串文件进行解析。\n```javascript\nconst parser = new Parser(template, options);\n```\n\n`Parser`内部则通过四种不同的类型的节点解析器，分别是`fragment`、`tag`、`mustache`和`text`。通过遍历文件的字符串内容，轮流调用这几个方法。\n\n首先，我们没有使用`<style></style>`标签，忽略css解析的步骤。  \n在初始化时，默认的html内容整体的type是`Fragment`。把解析后的html数据存储到`this.html`中\n\n```javascript\nthis.html = {\n  start: null,\n  end: null,\n  type: 'Fragment',\n  children: []\n};\n```\n\n开始解析我们的Svelte文件内容，最开始解析`<script>...`的最左侧`<`，符合`tag`的解析。\n```javascript\nif (parser.match('<')) {\n  return tag;\n}\n```\n\n点击`tag`，进入`packages/svelte/src/compiler/parse/state/tag.js`。很明显，`script`符合以下逻辑：\n```javascript\nconst specials = new Map([\n  [\n    'script',\n    {\n      read: read_script,\n      property: 'js'\n    }\n  ],\n  [\n    'style',\n    {\n      read: read_style,\n      property: 'css'\n    }\n  ]\n]);\n```\n\n调用`read_script`：\n```javascript\nexport default function read_script(parser, start, attributes) {\n  ...\n  let ast;\n  try {\n    ast = acorn.parse(source);\n  } catch (err) {\n    parser.acorn_error(err);\n  }\n  ...\n  return {\n    type: 'Script',\n    start,\n    end: parser.index,\n    context: get_context(parser, attributes, start),\n    content: ast\n  };\n}\n```\n\n点击`acorn.parse`，我们看到里面的核心便是调用`code-read`的`parse`来解析js的内容：\n```javascript\nexport const parse = (source) =>\n  code_red.parse(source, {\n    sourceType: 'module',\n    ecmaVersion: 13,\n    locations: true\n  });\n```\n\n这部分便是ast对象中的instance属性中的内容：\n![alt text](/images/svelte/37-5.png)  \n到这里我们已经完成了对`<script>...</script>`标签内容的解析\n\n接下来是重点处理的html的内容。\n\n`<script></script>`解析完成之后，我们遇到了一个空行，空字符串也不能忽略，继续用fragment方法判断。\n```javascript\nexport default function fragment(parser) {\n  ...\n\n  return text;\n}\n```\n使用`text`方法来解析这个空行内容。返回的格式：\n```javascript\nexport default function text(parser) {\n  ...\n\n  const node = {\n    start,\n    end: parser.index,\n    type: 'Text',\n    raw: data,\n    data: decode_character_references(data, false)\n  };\n\n  parser.current().children.push(node);\n}\n```\n![alt text](/images/svelte/37-6.png)\n\n空行解析完成，我们遇到了`<button>`标签，此时仍旧是调用`fragment`中的`tag`方法。\n```javascript\nconst type = meta_tags.has(name)\n    ? meta_tags.get(name)\n    : regex_capital_letter.test(name[0]) || name === 'svelte:self' || name === 'svelte:component'\n    ? 'InlineComponent'\n    : name === 'svelte:fragment'\n    ? 'SlotTemplate'\n    : name === 'title' && parent_is_head(parser.stack)\n    ? 'Title'\n    : name === 'slot'\n    ? 'Slot'\n    : 'Element';\n\nconst element = {\n  start,\n  end: null,\n  type,\n  name,\n  attributes: [],\n  children: []\n};\n```\n我们遇到的不是`<script>`、`<style>`此类标签，也不是Svelte的自定义标签，最后得到的是`Element`type。\n\n之后开始读取标签内属性的内容：\n```javascript\nwhile ((attribute = read_attribute(parser, unique_names, is_top_level_script_or_style))) {\n  element.attributes.push(attribute);\n  parser.allow_whitespace();\n}\n```\n\n```javascript\nconst name = parser.read_until(regex_token_ending_character);\nif (!name) return null;\nlet end = parser.index;\nparser.allow_whitespace();\nconst colon_index = name.indexOf(':');\nconst type = colon_index !== -1 && get_directive_type(name.slice(0, colon_index));\n```\n\n`parser.read_until`读取到`on:click`：\n```javascript\nfunction get_directive_type(name) {\n  if (name === 'use') return 'Action';\n  if (name === 'animate') return 'Animation';\n  if (name === 'bind') return 'Binding';\n  if (name === 'class') return 'Class';\n  if (name === 'style') return 'StyleDirective';\n  if (name === 'on') return 'EventHandler';\n  if (name === 'let') return 'Let';\n  if (name === 'in' || name === 'out' || name === 'transition') return 'Transition';\n}\n```\n通过`get_directive_type`来得到attribute的type是`EventHandler`类型。\n\n通过`read_attribute_value`来获取`on:click={}`中`{}`内的值。\n```javascript\nif (parser.eat('=')) {\n  parser.allow_whitespace();\n  value = read_attribute_value(parser, is_static);\n  end = parser.index;\n} \n```\n\n在`read_attribute_value`内部调用`read_sequence`：\n```javascript\ntry {\n  value = read_sequence(\n    parser,\n    () => {\n      // handle common case of quote marks existing outside of regex for performance reasons\n      if (quote_mark) return parser.match(quote_mark);\n      return !!parser.match_regex(regex_starts_with_invalid_attr_value);\n    },\n    'in attribute value'\n  );\n} \n```\n\n而`read_sequence`内部则调用`read_expression(parser);`，深挖其核心逻辑，最终是调用`code-red`的`parseExpressionAt`来解析`{}`的内容，将这部分内容赋值到`expression`属性中。\n\n```javascript\nimport * as code_red from 'code-red';\n\nexport const parse_expression_at = (source, index) =>\ncode_red.parseExpressionAt(source, index, {\n  sourceType: 'module',\n  ecmaVersion: 13,\n  locations: true\n});\n```\n\n![alt text](/images/svelte/37-7.png)\n\n此时我们已经解析到`<button on:click={addCount}>`。\n\n接着往下，这个`Element`type的children值只有一个节点，那就是add文案所代表的Text节点\n![alt text](/images/svelte/37-8.png)  \n之后我们算是已经解析到`</button>`。\n\n接着往下我们遇到`count:`，同样是`Text`节点。\n![alt text](/images/svelte/37-9.png)\n\n接着遇到`{`，继续调用`fragment`内的`mustache`方法，解析得到`MustacheTag`类型的节点。\n```javascript\nconst expression = read_expression(parser);\nparser.allow_whitespace();\nparser.eat('}', true);\nparser.current().children.push({\n  start,\n  end: parser.index,\n  type: 'MustacheTag',\n  expression\n});\n```\n\n![alt text](/images/svelte/37-10.png)\n\n### Component\n执行完`const ast = parse(source, options);`后，我们进入下一步：\n```javascript\nconst component = new Component(\n  ast,\n  source,\n  options.name || get_name_from_filename(options.filename) || 'Component',\n  options,\n  stats,\n  warnings\n);\n```\n\n`Component`中几个关键的步骤：\n```javascript\nthis.walk_module_js();\nthis.walk_instance_js_pre_template();\nthis.fragment = new Fragment(this, ast.html);\nthis.walk_instance_js_post_template();\n```\n我们没有声明过`context='module'`的script内容，所以跳过`walk_module_js`。\n\n在`walk_instance_js_pre_template`中调用`create_scopes`来解析script标签内的作用域：\n```javascript\nconst { scope: instance_scope, map, globals } = create_scopes(script.content);\n```\n可以把这些变量打印出来看下`console.log('svelte Component walk_instance_js_pre_template', instance_scope, map, globals);`\n\n`create_scopes`内部是使用了`periscopic`的`analyse`方法。\n```javascript\nimport { analyze, Scope, extract_names, extract_identifiers } from 'periscopic';\n\n/**\n * @param {import('estree').Node} expression\n */\nexport function create_scopes(expression) {\n  return analyze(expression);\n}\n```\n![alt text](/images/svelte/37-11.png)\n\n调用`this.add_var()`将变量存入`vars`中：\n```javascript\nadd_var(node, variable, add_to_lookup = true) {\n  this.vars.push(variable);\n  if (add_to_lookup) {\n    if (this.var_lookup.has(variable.name)) {\n      const exists_var = this.var_lookup.get(variable.name);\n      if (exists_var.module && exists_var.imported) {\n        this.error(/** @type {any} */ (node), compiler_errors.illegal_variable_declaration);\n      }\n    }\n    this.var_lookup.set(variable.name, variable);\n  }\n}\n```\n\n打印出来看下：\n```diff\n  this.walk_instance_js_pre_template();\n+ console.log('svelte Component this', this);\n```\n\n![alt text](/images/svelte/37-12.png)\n\n执行完`this.walk_instance_js_pre_template();`，继续下一步：\n```javascript\nthis.fragment = new Fragment(this, ast.html);\n```\n\n`Fragment`内部，执行`map_children`方法：\n```javascript\nexport default class Fragment extends Node {\n  constructor(component, info) {\n    const scope = new TemplateScope();\n    super(component, null, scope, info);\n    this.scope = scope;\n    this.children = map_children(component, this, scope, info.children);\n  }\n}\n```\n\n```diff\n  this.children = map_children(component, this, scope, info.children);\n+ console.log('svelte Fragment children', this.children);\n```\n![alt text](/images/svelte/37-13.png)\n\n把数组的每项展开看下：\n![alt text](/images/svelte/37-14.png)\n![alt text](/images/svelte/37-15.png)\n![alt text](/images/svelte/37-16.png)\n![alt text](/images/svelte/37-17.png)\n\n`map_children`的作用是将ast中的节点进行转换。\n\n执行完`new Fragment()`，继续下一步：\n```javascript\nwalk_instance_js_post_template() {\n  const script = this.ast.instance;\n  if (!script) return;\n  this.post_template_walk();\n  this.hoist_instance_declarations();\n  this.extract_reactive_declarations();\n  this.check_if_tags_content_dynamic();\n}\n```\n执行`walk_instance_js_post_template`中的`this.post_template_walk`\nwalk的content就是ast.instance.content的内容。\n```javascript\npost_template_walk() {\n  const script = this.ast.instance;\n  if (!script) return;\n  const component = this;\n  const { content } = script;\n\n  ...\n\n  walk(content, {\n    enter(node, parent, prop, index) {},\n    leave(node) {}\n  })\n}\n```\n\n把content打印出来看下：\n![alt text](/images/svelte/37-18.png)\n\n这个`walk_instance_js_post_template`的主要作用是：\n对节点进行一些额外的检查，例如检查是否有未关闭的标签，是否有不合法的属性等。\n对节点进行一些优化，例如移除不必要的空白节点，合并连续的文本节点等。\n收集一些信息，例如收集所有使用的组件，收集所有的依赖等。\n\n```diff\nconst component = new Component(\n  ast,\n  source,\n  options.name || get_name_from_filename(options.filename) || 'Component',\n  options,\n  stats,\n  warnings\n);\n+  console.log('svelte component', component);\n```\n把`new Component()`的结果打印出来看下：\n![alt text](/images/svelte/37-19.png)\n\n### render_dom\n往下执行`render_dom`，查看下`render_dom`的执行逻辑：\n```javascript\nconst result =\n  options.generate === false\n    ? null\n    : options.generate === 'ssr'\n    ? render_ssr(component, options)\n    : render_dom(component, options);\n```\n点击`render_dom`进入内部，内部有个`Renderer`：\n```javascript\nconst renderer = new Renderer(component, options);\n```\n\n`Renderer`内部：\n```javascript\nthis.block = new Block({\n  renderer: this,\n  name: null,\n  type: 'component',\n  key: null,\n  bindings: new Map(),\n  dependencies: new Set()\n});\nthis.block.has_update_method = true;\nthis.fragment = new FragmentWrapper(\n  this,\n  this.block,\n  component.fragment.children,\n  null,\n  true,\n  null\n);\nthis.fragment.render(this.block, null, /** @type {import('estree').Identifier} */ (x`#nodes`));\n```\n\n看下`Block`的实现，`Block`的`constructor`如下：\n```javascript\nconstructor(options) {\n  this.parent = options.parent;\n  this.renderer = options.renderer;\n  this.name = options.name;\n  this.type = options.type;\n  this.comment = options.comment;\n  this.wrappers = [];\n  // for keyed each blocks\n  this.key = options.key;\n  this.first = null;\n  this.bindings = options.bindings;\n  this.chunks = {\n    declarations: [],\n    init: [],\n    create: [],\n    claim: [],\n    hydrate: [],\n    mount: [],\n    measure: [],\n    restore_measurements: [],\n    fix: [],\n    animate: [],\n    intro: [],\n    update: [],\n    outro: [],\n    destroy: []\n  };\n  this.has_animation = false;\n  this.has_intro_method = false; // a block could have an intro method but not intro transitions, e.g. if a sibling block has intros\n  this.has_outro_method = false;\n  this.outros = 0;\n  this.get_unique_name = this.renderer.component.get_unique_name_maker();\n  this.aliases = new Map();\n  if (this.key) this.aliases.set('key', this.get_unique_name('key'));\n}\n```\n![alt text](/images/svelte/37-20.png)\n用来表示一个代码块的类，它包含了一些关于这个代码块的信息，例如它的类型，它的依赖，它的绑定等。\n\n了解完`Block`，下一步`FragmentWrapper`：\n```javascript\nthis.fragment = new FragmentWrapper(\n  this,\n  this.block,\n  component.fragment.children,\n  null,\n  true,\n  null\n);\n```\nSvelte内部用来表示一个模板片段的类，它包含了一些关于这个模板片段的信息，例如它的子节点，它的父节点等。\n\n继续下一步：\n```javascript\nthis.fragment.render(this.block, null, /** @type {import('estree').Identifier} */ (x`#nodes`));\n```\n\n就是`FragmentWrapper`内部的`render`方法：\n```javascript\nrender(block, parent_node, parent_nodes) {\n  for (let i = 0; i < this.nodes.length; i += 1) {\n    this.nodes[i].render(block, parent_node, parent_nodes);\n  }\n}\n```\n\n![alt text](/images/svelte/37-21.png)\n\n这里的nodes是调用各个类型的wrapper实例化后的对象，每个wrapper类有自己的render方法：\n```javascript\nconst wrappers = {\n  AwaitBlock,\n  Body,\n  Comment,\n  DebugTag,\n  Document,\n  EachBlock,\n  Element,\n  Head,\n  IfBlock,\n  InlineComponent,\n  KeyBlock,\n  MustacheTag,\n  Options: null,\n  RawMustacheTag,\n  Slot,\n  SlotTemplate,\n  Text,\n  Title,\n  Window\n};\n```\n\n简单看一些wrapper的实现，比如Text Wrapper：\n```javascript\nrender(block, parent_node, parent_nodes) {\n  if (this.skip) return;\n  const use_space = this.use_space();\n  const string_literal = {\n    type: 'Literal',\n    value: this.data,\n    loc: {\n        start: this.renderer.locate(this.node.start),\n        end: this.renderer.locate(this.node.end)\n    }\n  };\n  block.add_element(\n    this.var,\n    use_space ? x`@space()` : x`@text(${string_literal})`,\n    parent_nodes &&\n        (use_space\n          ? x`@claim_space(${parent_nodes})`\n          : x`@claim_text(${parent_nodes}, ${string_literal})`),\n    /** @type {import('estree').Identifier} */ (parent_node)\n  );\n}\n```\n\n这里调用了`code-red`的`x`方法，把内容打印出来看下：\n\n```diff\n+ console.log('svelte text wrapper render', x`@text(${string_literal})`);\n  block.add_element(\n  this.var,\n  use_space ? x`@space()` : x`@text(${string_literal})`,\n  ...\n```\n![alt text](/images/svelte/37-22.png)\n\n\nElement的`render`方法：\n```javascript\nrender(block, parent_node, parent_nodes) {\n  if (this.child_dynamic_element) {\n    this.render_dynamic_element(block, parent_node, parent_nodes);\n  } else {\n    this.render_element(block, parent_node, parent_nodes);\n  }\n}\n```\n\n看下这个`render_element`的实现：\n```javascript\nrender_element(block, parent_node, parent_nodes) {\n  const { renderer } = this;\n  const hydratable = renderer.options.hydratable;\n  if (this.node.name === 'noscript') return;\n  const node = this.var;\n  const nodes = parent_nodes && block.get_unique_name(`${this.var.name}_nodes`);\n  const children = x`@children(${this.node.name === 'template' ? x`${node}.content` : node})`;\n  block.add_variable(node);\n  const render_statement = this.get_render_statement(block);\n  block.chunks.create.push(b`${node} = ${render_statement};`);\n  const { can_use_textcontent, can_optimise_to_html_string, can_optimise_hydration } = this.node;\n  ...\n  if (parent_node) {\n    ...\n  } else {\n    const insert = b`@insert(#target, ${node}, #anchor);`;\n    ((insert[0]).expression).callee.loc = {\n      start: this.renderer.locate(this.node.start),\n      end: this.renderer.locate(this.node.end)\n    };\n    block.chunks.mount.push(insert);\n    block.chunks.destroy.push(b`if (detaching) @detach(${node});`);\n  }\n  if (can_optimise_to_html_string && (!hydratable || can_optimise_hydration)) {\n    if (this.fragment.nodes.length === 1 && this.fragment.nodes[0].node.type === 'Text') {\n      /** @type {import('estree').Node} */\n      let text = string_literal(\n        /** @type {import('../Text.js').default} */ (this.fragment.nodes[0]).data\n      );\n      ...\n      block.chunks.create.push(b`${node}.textContent = ${text};`);\n      ...\n    } else {\n      ...\n    }\n  } else {\n    this.fragment.nodes.forEach((child) => {\n      child.render(block, this.node.name === 'template' ? x`${node}.content` : node, nodes, {\n        element_data_name: this.element_data_name\n      });\n    });\n  }\n  \n  ...\n  block.renderer.dirty(this.node.tag_expr.dynamic_dependencies());\n}\n```\n\n我们尝试把它的`children`打印出来看下：\n```diff\nconst node = this.var;\n  const nodes = parent_nodes && block.get_unique_name(`${this.var.name}_nodes`); // if we're in unclaimable territory, i.e. <head>, parent_nodes is null\n  const children = x`@children(${this.node.name === 'template' ? x`${node}.content` : node})`;\n  block.add_variable(node);\n+ console.log('svelte render_element children', children);\n  const render_statement = this.get_render_statement(block);\n```\n![alt text](/images/svelte/37-23.png)\n\n\n```diff\n  const insert = b`@insert(#target, ${node}, #anchor);`;\n  /** @type {import('estree').CallExpression} */ (\n    /** @type {import('estree').ExpressionStatement} */ (insert[0]).expression\n  ).callee.loc = {\n    start: this.renderer.locate(this.node.start),\n    end: this.renderer.locate(this.node.end)\n  };\n  block.chunks.mount.push(insert);\n  block.chunks.destroy.push(b`if (detaching) @detach(${node});`);\n+ console.log('svelte render_element insert', insert, node, b`if (detaching) @detach(${node});`)\n```\n![alt text](/images/svelte/37-24.png)\n![alt text](/images/svelte/37-25.png)\n\n```javascript\nthis.fragment.nodes.forEach((child) => {\n  child.render(block, this.node.name === 'template' ? x`${node}.content` : node, nodes, {\n    element_data_name: this.element_data_name\n  });\n});\n```\n依次调用`render`方法。\n\n`MustachTag`的`render`方法：\n```javascript\nrender(block, parent_node, parent_nodes, data) {\n  const contenteditable_attributes =\n    this.parent instanceof ElementWrapper &&\n    this.parent.attributes.filter((a) => a.node.name === 'contenteditable');\n  const spread_attributes =\n    this.parent instanceof ElementWrapper &&\n    this.parent.attributes.filter((a) => a.node.is_spread);\n\n  ...\n  const { init } = this.rename_this_method(block, (value) => {\n    if (contenteditable_attr_value) {\n      ...\n    } else {\n      return x`@set_data(${this.var}, ${value})`;\n    }\n  });\n  block.add_element(\n    this.var,\n    x`@text(${init})`,\n    parent_nodes && x`@claim_text(${parent_nodes}, ${init})`,\n    parent_node\n  );\n}\n```\n\n```diff\nconst { init } = this.rename_this_method(block, (value) => {\n  if (contenteditable_attr_value) {\n    if (contenteditable_attr_value === true) {\n      return x`@set_data_contenteditable(${this.var}, ${value})`;\n    } else {\n      return x`@set_data_maybe_contenteditable(${this.var}, ${value}, ${contenteditable_attr_value})`;\n    }\n  } else {\n+   console.log('svelte mustachetag rename_this_method', x`@set_data(${this.var}, ${value})`, this.var, value);\n    return x`@set_data(${this.var}, ${value})`;\n  }\n});\n```\n\n![alt text](/images/svelte/37-26.png)\n\n返回到`packages/svelte/src/compiler/compile/render_dom/index.js`\n```diff\nexport default function dom(component, options) {\n  const { name } = component;\n  const renderer = new Renderer(component, options);\n+ console.log('svelte renderer', renderer);\n  const { block } = renderer;\n  ...\n```\n\n![alt text](/images/svelte/37-27.png)\n在刚才查看各个render方法时，我们注意到它一直在操作`block.chunk`，现在我们可以看到上面的`create`、`mount`、`update`和`destroy`上的逻辑代码已准备就绪。我们也知道了`render_dom`的主要作用就是把代码转化成能真正挂载到页面上的节点，同时处理了页面的各个生命周期。\n\n`render_dom`中一段非常重要的解析：\n```javascript\nwalk(component.ast.instance.content, {\n  enter(node) {\n    ...\n  },\n  leave(node) {\n    if (map.has(node)) {\n      scope = scope.parent;\n    }\n    if (execution_context === node) {\n      execution_context = null;\n    }\n    if (node.type === 'AssignmentExpression' || node.type === 'UpdateExpression') {\n      const assignee = node.type === 'AssignmentExpression' ? node.left : node.argument;\n      // normally (`a = 1`, `b.c = 2`), there'll be a single name\n      // (a or b). In destructuring cases (`[d, e] = [e, d]`) there\n      // may be more, in which case we need to tack the extra ones\n      // onto the initial function call\n      const names = new Set(extract_names(/** @type {import('estree').Node} */ (assignee)));\n      this.replace(invalidate(renderer, scope, node, names, execution_context === null));\n    }\n  }\n});\n```\n大家对`this.replace`还有印象吗？不错，我们在《库》章节演示estree-walk时演示过这个方法，`this.replace(invalidate(renderer, scope, node, names, execution_context === null))`对Svelte文件中涉及到更新的代码进行替换，替换成`$$invalidate`相关形式的代码。\n\n查看下invalidate的逻辑，`packages/svelte/src/compiler/compile/render_dom/invalidate.js`：\n```diff\ninvalidate = x`$$invalidate(${\n  renderer.context_lookup.get(head.name).index\n}, ${node}, ${extra_args})`;\n+ console.log('svelte invalidate', invalidate, renderer.context_lookup, node);\n```\n\n![alt text](/images/svelte/37-28.png)\n\n继续回到`render_dom`方法\n```javascript\nconst has_create_fragment = component.compile_options.dev || block.has_content();\nif (has_create_fragment) {\n  body.push(b`\n    function create_fragment(#ctx) {\n      ${block.get_contents()}\n    }\n  `);\n}\n```\n很明显，这段就是到时会编译到页面上的`create_fragment`方法。我们可以把`block.get_contents`打印出来看一下\n![alt text](/images/svelte/37-29.png)\n笔者之前都是使用console.log这种粗暴直接的方法来进行演示，一是快速直接，二是在控制台中打印出数据的全貌便于浏览。如果读者对断点调试得心应手，也可像上图般对各个关键节点进行打断点调试。\n\n```javascript\nconst condition =\n  !uses_rest_or_props && writable.length > 0 && renderer.dirty(writable, true);\nlet statement = d.node;\nif (condition)\n  statement = /** @type {import('estree').Statement} */ (\n    b`if (${condition}) { ${statement} }`[0]\n  );\n```\n此段代码是用来编译条件判断ifblock的展示。\n\n继续往下：\n```javascript\nbody.push(b`\n  function ${definition}(${args}) {\n    ${injected.map((name) => b`let ${name};`)}\n\n    ${rest}\n\n    ${reactive_store_declarations}\n\n    ${reactive_store_subscriptions}\n\n    ${resubscribable_reactive_store_unsubscribers}\n\n    ${\n      component.slots.size || component.compile_options.dev || uses_slots\n        ? b`let { $$slots: #slots = {}, $$scope } = $$props;`\n        : null\n    }\n    ...\n\n    ${instance_javascript}\n\n    ...\n\n    ${/* before reactive declarations */ props_inject}\n\n    ${\n      reactive_declarations.length > 0 &&\n      b`\n    $$self.$$.update = () => {\n      ${reactive_declarations}\n    };\n    `\n    }\n\n    ...\n\n    return ${return_value};\n  }\n`);\n```\n我们把definition和args打印出来看下\n![alt text](/images/svelte/37-30.png)\n从打印结果我们能够推断出，这段代码编译后对应的是`function instance(){}`\n\n```javascript\nconst superclass = {\n  type: 'Identifier',\n  name: options.dev ? '@SvelteComponentDev' : '@SvelteComponent'\n};\n...\nconst declaration = /** @type {import('estree').ClassDeclaration} */ (\n  b`\n  class ${name} extends ${superclass} {\n    constructor(options) {\n      super(${options.dev && 'options'});\n      @init(this, options, ${definition}, ${\n    has_create_fragment ? 'create_fragment' : 'null'\n  }, ${not_equal}, ${prop_indexes}, ${optional_parameters});\n      ${\n        options.dev &&\n        b`@dispatch_dev(\"SvelteRegisterComponent\", { component: this, tagName: \"${name.name}\", options, id: create_fragment.name });`\n      }\n    }\n  }\n`[0]\n);\npush_array(declaration.body.body, accessors);\nbody.push(/** @type {any} */ (declaration));\n```\n这段代码则对应编译后的组件的类`class X extends SvelteComponent {}`\n\n```diff\nconst result =\n  options.generate === false\n    ? null\n    : options.generate === 'ssr'\n    ? render_ssr(component, options)\n    : render_dom(component, options);\n+ console.log('svelte compile result', result);\n```\n![alt text](/images/svelte/37-31.png)\n\n### generate\n终于来到编译的最后一步。\n\n```javascript\ngenerate(result) {\n  let js = null;\n  let css = null;\n  if (result) {\n\n    /** @type {any} */\n    const program = { type: 'Program', body: result.js };\n    walk(program, {\n      enter: (node, parent, key) => {\n        if (node.type === 'Identifier') {\n          ...\n        }\n      }\n    });\n    ...\n    create_module(\n      program,\n      name,\n      banner,\n      compile_options.sveltePath,\n      imported_helpers,\n      referenced_globals,\n      this.imports,\n      this.vars\n        .filter((variable) => variable.module && variable.export_name)\n        .map((variable) => ({\n          name: variable.name,\n          as: variable.export_name\n        })),\n      this.exports_from\n    );\n    const js_sourcemap_enabled = check_enable_sourcemap(compile_options.enableSourcemap, 'js');\n    if (!js_sourcemap_enabled) {\n      js = print(program);\n      js.map = null;\n    } else {\n      ...\n    }\n  }\n  return {\n    js,\n    css,\n    ast: this.original_ast,\n    warnings: this.warnings,\n    vars: this.get_vars_report(),\n    stats: this.stats.render()\n  };\n}\n```\n\n`create_module`方法\n```javascript\nexport default function create_module(\n  program,\n  name,\n  banner,\n  svelte_path = 'svelte',\n  helpers,\n  globals,\n  imports,\n  module_exports,\n  exports_from\n) {\n  const internal_path = `${svelte_path}/internal`;\n  helpers.sort((a, b) => (a.name < b.name ? -1 : 1));\n  globals.sort((a, b) => (a.name < b.name ? -1 : 1));\n  return esm(\n    program,\n    name,\n    banner,\n    svelte_path,\n    internal_path,\n    helpers,\n    globals,\n    imports,\n    module_exports,\n    exports_from\n  );\n}\n\nfunction esm(\n  program,\n  name,\n  banner,\n  svelte_path,\n  internal_path,\n  helpers,\n  globals,\n  imports,\n  module_exports,\n  exports_from\n) {\n  const import_declaration = {\n    type: 'ImportDeclaration',\n    specifiers: helpers.map((h) => ({\n      type: 'ImportSpecifier',\n      local: h.alias,\n      imported: { type: 'Identifier', name: h.name }\n    })),\n    source: { type: 'Literal', value: internal_path }\n  };\n\n  ...\n\n  program.body = b`\n    /* ${banner} */\n\n    ${import_declaration}\n    ${internal_globals}\n    ${imports}\n    ${exports_from}\n\n    ${program.body}\n\n    export default ${name};\n    ${exports}\n  `;\n}\n\n```\n核心就是编译生成页面最终的`import`和`export`部分的内容。\n\n![alt text](/images/svelte/37-32.png)  \n![alt text](/images/svelte/37-33.png)\n\n我们尝试把import部分的代码变量打印出来看下：\n```diff\nconst import_declaration = {\n  type: 'ImportDeclaration',\n  specifiers: helpers.map((h) => ({\n    type: 'ImportSpecifier',\n    local: h.alias,\n    imported: { type: 'Identifier', name: h.name }\n  })),\n  source: { type: 'Literal', value: internal_path }\n};\n+ console.log('svelte import_declaration', import_declaration, helpers);\n```\n![alt text](/images/svelte/37-34.png)\n\n最后经过code-red的`print`方法生成最终的js代码\n```javascript\nif (!js_sourcemap_enabled) {\n  js = print(program);\n  js.map = null;\n} \n```\n\n```diff\nconst result =\n  options.generate === false\n    ? null\n    : options.generate === 'ssr'\n    ? render_ssr(component, options)\n    : render_dom(component, options);\n+ console.log('svelte final code',\n+   component.generate(result),\n+   component.generate(result).js.code\n+ );\n```\n![alt text](/images/svelte/37-35.png)  \n![alt text](/images/svelte/37-36.png)\n\n\n回看`svelte-loader`的代码，同样是返回`js.code`的代码。\n`https://github.com/sveltejs/svelte-loader/blob/master/index.js`\n![alt text](/images/svelte/37-37.png)\n\n最后提供一个compile阶段的思维导图：\n![](/images/svelte/37-43.png)\n\n## runtime\n\n我们把在编译后得到的js代码复制进一个文件中`index.js`。\n在svelte源码项目目录下新建一个目录叫`test-runtime`，新建一个index.html：\n```html\n<div id=\"app\"></div>\n<script type=\"module\" src=\"./index.js\"></script>\n```\n\n![alt text](/images/svelte/37-38.png)\n\n修改index.js的几处地方：\n- 把引用`svelte/internal`的路径进行调整`../packages/svelte/src/runtime/internal`；\n- 把`import \"svelte/internal/disclose-version\";`移除；\n- 注释最下面一行的`export default Component`，改成：\n```javascript\nnew Component({\n  target: document.querySelector('#app')\n})\n```\n\n在`test-runtime`目录下\n```bash\nnpm init -y\nnpm install vite\n```\n在`package.json`中添加运行指令：\n```diff\n\"scripts\": {\n  \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\",\n+ \"dev\": \"vite\"\n},\n```\n`npm run dev`把项目跑起来：\n![alt text](/images/svelte/37-39.png)\n\n在`runtime`阶段，我们主要观察数据是如何更新的。\n\n首先是当我们点击button时\n```javascript\nif (!mounted) {\n  dispose = listen(button, \"click\", /*addCount*/ ctx[1]);\n  mounted = true;\n}\n```\n这里click绑定的监听方法是`ctx[1]`，经过前面的学习，我们知道，ctx数组就是instance方法执行后的返回值。\n```javascript\nfunction instance($$self, $$props, $$invalidate) {\n  let count = 0;\n\n  const addCount = () => {\n    $$invalidate(0, count++, count);\n  };\n\n  return [count, addCount];\n}\n```\n\n也就是我们点击按钮之后，会执行addCount方法，addCount内部的赋值语句已经被重新编译后，变成了`$$invalidate()`。\n```diff\ninstance(component, options.props || {}, (i, ret, ...rest) => {\n  const value = rest.length ? rest[0] : ret;\n+ console.log('svelte instance $$invalidate', i, ret, rest);\n  if ($$.ctx && not_equal($$.ctx[i], ($$.ctx[i] = value))) {\n    if (!$$.skip_bound && $$.bound[i]) $$.bound[i](value);\n    if (ready) make_dirty(component, i);\n  }\n  return ret;\n})\n```\n\n![alt text](/images/svelte/37-40.png)\ni是0，ret是未更新前的值0，rest数组中是更新后的值1。\n经过`not_equal`比较后0和1不相等，触发`make_dirty`。\n我们把剩余的关键节点都逐个打印出来\n\n```diff\nfunction make_dirty(component, i) {\n+ console.log('svelte make_dirty', component, i);\n  if (component.$$.dirty[0] === -1) {\n    dirty_components.push(component);\n    schedule_update();\n    component.$$.dirty.fill(0);\n+   console.log('svelte component.$$.dirty before', [...component.$$.dirty]);\n  }\n  component.$$.dirty[(i / 31) | 0] |= 1 << i % 31;\n+ console.log('svelte component.$$.dirty after', component.$$.dirty);\n}\n```\n\n```diff\nexport function schedule_update() {\n+ console.log('svelte schedule_update');\n  if (!update_scheduled) {\n    update_scheduled = true;\n    resolved_promise.then(flush);\n  }\n}\n```\n\n```diff\nexport function flush() {\n+ console.log('svelte flush', flushidx, dirty_components);\n  \n  ...\n\n  do {\n    try {\n      while (flushidx < dirty_components.length) {\n        const component = dirty_components[flushidx];\n        flushidx++;\n        set_current_component(component);\n        update(component.$$);\n      }\n    } catch (e) {\n      ...\n    }\n  }\n  ...\n}\n```\n\n```diff\nfunction update($$) {\n+ console.log('svelte update');\n  if ($$.fragment !== null) {\n    $$.update();\n    run_all($$.before_update);\n    const dirty = $$.dirty;\n    $$.dirty = [-1];\n    $$.fragment && $$.fragment.p($$.ctx, dirty);\n    $$.after_update.forEach(add_render_callback);\n  }\n}\n```\n\n```diff\np(ctx, [dirty]) {\n+ console.log('svelte runtime p', ctx, dirty);\n  if (dirty & /*count*/ 1) set_data(t2, /*count*/ ctx[0]);\n},\n```\n\n当我们刷新页面时，执行了`flush`：\n![alt text](/images/svelte/37-41.png)\n\n当我们点击button进行更新：\n![alt text](/images/svelte37-42.png)\n\n首先执行`$$invalidate`，然后执行`make_dirty`，然后执行`schedule_update`。\n我们看到`schedule_update`内部其实就是把`flush`放到微任务中执行，所以我们会先看到`component.$$.dirty`在更新前的值是`[0]`，然后执行位运算之后变成`[1]`。之后执行微任务中的`flush`，`flush`内部调用`update`，而`update`方法则是调用组件内的`p`方法。`p`方法中通过`dirty & 1`的判断`1 & 1`，从而执行`set_data`。\n\n```javascript\nexport function set_data(text, data) {\n  data = '' + data;\n  if (text.data === data) return;\n  text.data = /** @type {string} */ (data);\n}\n```\n`set_data`方法的主要逻辑则是更新text节点的data属性的值。\n\n最后也提供一个简易的流程图：\n![](/images/svelte/37-44.png)\n\n## 小结\n\n本章我们学习了：\n- compile的执行流程\n- runtime的执行流程\n\ncompile和runtime的难易程度，基本符合二八定律，百分之八十的内容都在编译器如何解析Svelte文件上。",
    "code": "var Component=(()=>{var h=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var g=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports),y=(s,e)=>{for(var a in e)l(s,a,{get:e[a],enumerable:!0})},i=(s,e,a,t)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of N(e))!k.call(s,c)&&c!==a&&l(s,c,{get:()=>e[c],enumerable:!(t=m(e,c))||t.enumerable});return s};var f=(s,e,a)=>(a=s!=null?h(u(s)):{},i(e||!s||!s.__esModule?l(a,\"default\",{value:s,enumerable:!0}):a,s)),w=s=>i(l({},\"__esModule\",{value:!0}),s);var r=g((j,o)=>{o.exports=_jsx_runtime});var x={};y(x,{default:()=>d,frontmatter:()=>v});var n=f(r()),v={title:\"Svelte\\u4ECE\\u5165\\u95E8\\u5230\\u7CBE\\u901A\\u2014\\u2014\\u6D41\\u7A0B\",date:\"2024-07-30\",tags:[\"svelte\"]};function p(s){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h2:\"h2\",h3:\"h3\",img:\"img\",li:\"li\",p:\"p\",path:\"path\",pre:\"pre\",span:\"span\",svg:\"svg\",ul:\"ul\",...s.components},{Image:a}=e;return a||_(\"Image\",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"\\u672C\\u7AE0\\u7B14\\u8005\\u5C06\\u6F14\\u793ASvelte\\u4ECE\\u7F16\\u8BD1\\u5230\\u8FD0\\u884C\\u7684\\u6574\\u4F53\\u6D41\\u7A0B\\u3002\"}),(0,n.jsxs)(e.p,{children:[\"\\u8FD9\\u91CC\\u7B14\\u8005\\u4F7F\\u7528\\u7684Node\\u7248\\u672C\\u4E3A\",(0,n.jsx)(e.code,{children:\"18.15.0\"}),\"\\u3002\"]}),(0,n.jsxs)(e.p,{children:[\"\\u9996\\u5148\\u6211\\u4EEC\\u4E0B\\u8F7D\\u6E90\\u7801\\uFF0C\\u7136\\u540E\\u628A\\u7248\\u672C\\u5206\\u652F\\u5207\\u6362\\u5230\",(0,n.jsx)(e.code,{children:\"4.2.12\"}),\"\\u5206\\u652F\\u3002\"]}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"code-highlight language-bash\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"git\"}),` clone git@github.com:sveltejs/svelte.git\n`]})})}),(0,n.jsx)(e.div,{children:(0,n.jsx)(a,{alt:\"\\u9879\\u76EE\\u7ED3\\u6784\",src:\"/images/svelte/37-45.png\",width:\"710\",height:\"1670\"})}),(0,n.jsxs)(e.p,{children:[\"Svelte\\u4F7F\\u7528\\u7684\\u662F\",(0,n.jsx)(e.code,{children:\"monorepo\"}),\"\\u7684\\u7BA1\\u7406\\u65B9\\u5F0F\\uFF0C\\u9996\\u5148\\u6211\\u4EEC\\u53C2\\u8003README.md\\u7684\\u5EFA\\u8BAE\\u5B89\\u88C5\\u4F9D\\u8D56\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"code-highlight language-bash\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"pnpm\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"install\"}),`\n`]})})}),(0,n.jsxs)(e.div,{children:[\"\\u7136\\u540E\\u6211\\u4EEC\\u8FDB\\u5165\\u5230\",(0,n.jsx)(e.code,{children:\"sites/svelte.dev\"}),\"\\u76EE\\u5F55\\uFF0C\\u6267\\u884C\",(0,n.jsx)(e.code,{children:\"pnpm run dev\"}),\"\\u3002 \\u5927\\u6982\\u7387\\u4F1A\\u9047\\u5230\\u8FD9\\u4E2A\\u95EE\\u9898\\uFF1A \",(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-46.png\",width:\"1122\",height:\"598\"})]}),(0,n.jsx)(e.p,{children:\"\\u7F3A\\u5C11sharp\\uFF0C\\u6211\\u4EEC\\u6309\\u7167\\u63D0\\u793A\\u5B89\\u88C5\\uFF1A\"}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"code-highlight language-bash\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"pnpm\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"add\"}),\" \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"--force\"}),` @img/sharp-darwin-arm64\n`]})})}),(0,n.jsxs)(e.div,{children:[\"\\u91CD\\u65B0\\u8FD0\\u884C\\uFF0C\\u9047\\u5230\\u4E00\\u4E2Awarning\\uFF1A \",(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-47.png\",width:\"1114\",height:\"242\"})]}),(0,n.jsxs)(e.div,{children:[\"\\u8FD9\\u662F\\u56E0\\u4E3A\",(0,n.jsx)(e.code,{children:\"svelte.dev\"}),\"\\u4E0B\\u7F3A\\u5C11\\u4E86\\u4E00\\u4E2A\",(0,n.jsx)(e.code,{children:\".svelte-kit\"}),\"\\u76EE\\u5F55\\u3002 \\u6211\\u4EEC\\u53EF\\u4EE5\\u6267\\u884C\",(0,n.jsx)(e.code,{children:\"pnpm run check\"}),\"\\uFF1A \",(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-48.png\",width:\"1908\",height:\"1126\"})]}),(0,n.jsxs)(e.div,{children:[\"\\u91CC\\u9762\\u7684\",(0,n.jsx)(e.code,{children:\"svelte-kit sync\"}),\"\\u5E2E\\u52A9\\u6211\\u4EEC\\u540C\\u6B65\\u4E0B\\u8F7D\\u8FD9\\u4E2A\\u76EE\\u5F55\\u3002 \",(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-49.png\",width:\"1110\",height:\"744\"})]}),(0,n.jsxs)(e.div,{children:[\"\\u73B0\\u5728\\u6211\\u4EEC\\u770B\\u5230\",(0,n.jsx)(e.code,{children:\"svelte.dev\"}),\"\\u4E0B\\u5DF2\\u7ECF\\u6709\\u4E86\",(0,n.jsx)(e.code,{children:\".svelte-kit\"}),\"\\u76EE\\u5F55\\u3002 \",(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-50.png\",width:\"578\",height:\"788\"})]}),(0,n.jsxs)(e.p,{children:[\"\\u6211\\u4EEC\\u91CD\\u65B0\\u8FD0\\u884C\\u4E0B\",(0,n.jsx)(e.code,{children:\"pnpm run dev\"}),\"\\uFF0C\\u6B63\\u5E38\\u60C5\\u51B5\\u80FD\\u8FD0\\u884C\\u8D77\\u6765\\u3002\"]}),(0,n.jsx)(e.p,{children:\"\\u8BF7\\u8BFB\\u8005\\u670B\\u53CB\\u4EEC\\u7ED3\\u5408\\u672C\\u7AE0\\u5185\\u5BB9\\u548C\\u6E90\\u7801\\u5BF9\\u6BD4\\u9605\\u8BFB\\uFF0C\\u6548\\u679C\\u66F4\\u4F73\\u3002\"}),(0,n.jsxs)(e.h2,{className:\"content-header\",id:\"compile\\u9636\\u6BB5\",children:[(0,n.jsx)(e.a,{href:\"#compile\\u9636\\u6BB5\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.span,{className:\"content-header-link\",children:(0,n.jsxs)(e.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,n.jsx)(e.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,n.jsx)(e.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"compile\\u9636\\u6BB5\"]}),(0,n.jsxs)(e.p,{children:[\"\\u53C2\\u7167\",(0,n.jsx)(e.code,{children:\"svelte-loader\"}),\"\\u4E2D\\u7684\",(0,n.jsx)(e.a,{href:\"https://github.com/sveltejs/svelte-loader/blob/master/index.js\",children:\"\\u903B\\u8F91\"}),\":\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"svelte\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"preprocess\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"source\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" options\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"preprocess\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"then\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"processed\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"processed\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"dependencies\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"&&\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"addDependency\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"for\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"let\"}),\" dependency \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"of\"}),\" processed\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"dependencies\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"addDependency\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"dependency\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"processed\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"map\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" compileOptions\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"sourcemap\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" processed\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"map\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" compiled \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" svelte\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"compile\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"processed\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"toString\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" compileOptions\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"let\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" js\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" css\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" warnings \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" compiled\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"callback\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword nil null\",children:\"null\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" js\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"code\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" js\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"map\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u9996\\u5148Svelte\\u6587\\u4EF6\\u7ECF\\u8FC7\\u9884\\u5904\\u7406\\uFF0C\\u6BD4\\u5982\\u50CF\\u8981\\u6DFB\\u52A0typescript\\u652F\\u6301\\u7B49\\uFF0C\\u7136\\u540E\\u8C03\\u7528\",(0,n.jsx)(e.code,{children:\"compile\"}),\"\\uFF0C\\u6700\\u540E\\u8FD4\\u56DE\",(0,n.jsx)(e.code,{children:\"js.code\"}),\"\\u3002\"]}),(0,n.jsxs)(e.p,{children:[\"\\u4E3A\\u4E86\\u7B80\\u5355\\u76F4\\u89C2\\u5730\\u67E5\\u770B\\u5230\\u5404\\u4E2A\\u9636\\u6BB5\\u7684\\u6267\\u884C\\u7ED3\\u679C\\uFF0C\\u6211\\u4EEC\\u5728\\u7F51\\u7AD9\\u9996\\u9875\",(0,n.jsx)(e.code,{children:\"sites/svelte.dev/src/routes/+layout.svelte\"}),\"\\u76F4\\u63A5\\u5F15\\u5165svelte\\u7F16\\u8BD1\\u5668\\u6587\\u4EF6\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-diff\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-diff\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` import '@sveltejs/site-kit/styles/index.css';\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` import { browser } from '$app/environment';\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` import { page } from '$app/stores';\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` import { Icon, Shell, Banners } from '@sveltejs/site-kit/components';\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` import { Nav, Separator } from '@sveltejs/site-kit/nav';\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` import { Search, SearchBox } from '@sveltejs/site-kit/search';\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line inserted\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token prefix inserted\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:` import { compile, preprocess } from '../../../../packages/svelte/src/compiler';\n`})]})]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u7136\\u540E\\u6211\\u4EEC\\u4EFF\\u7167\",(0,n.jsx)(e.code,{children:\"svelte-loader\"}),\"\\u7684\\u903B\\u8F91\\uFF0C\\u5148\\u8C03\\u7528\",(0,n.jsx)(e.code,{children:\"preprocess\"}),\"\\uFF0C\\u7136\\u540E\\u628A\\u9884\\u5904\\u7406\\u7684\\u7ED3\\u679C\\u6253\\u5370\\u51FA\\u6765\\uFF0C\\u56E0\\u4E3A\\u6211\\u4EEC\\u672C\\u6B21\\u91CD\\u70B9\\u5728\\u7F16\\u8BD1\\u548C\\u8FD0\\u884C\\uFF0C\\u6240\\u4EE5\\u6211\\u4EEC\\u53EA\\u662F\\u6253\\u5370\\u7ECF\\u8FC7\",(0,n.jsx)(e.code,{children:\"preprocess\"}),\"\\u540E\\u7684\\u7ED3\\u679C\\uFF0C\\u5728\",(0,n.jsx)(e.code,{children:\"compile\"}),\"\\u9636\\u6BB5\\uFF0C\\u6211\\u4EEC\\u76F4\\u63A5\\u4F20\\u5165Svelte\\u6587\\u4EF6\\u7684\\u5B57\\u7B26\\u4E32\\u5185\\u5BB9\\u3002\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"let\"}),\" str \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:`<script>\n`})]})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`  let count = 0;\n`})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`  const addCount = () => {\n`})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`    count++;\n`})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`  }\n`})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`<\\\\/script>\n`})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`<button on:click={addCount}>add</button>\n`})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`count:{count}\n`})})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"preprocess\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"str\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"then\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"preResult\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token class-name console\",children:\"console\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"log\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'preprocess result'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" preResult\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"let\"}),\" result \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"compile\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"str\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token class-name console\",children:\"console\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"log\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'compile result'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" result\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,n.jsxs)(e.div,{children:[\"\\u8FDB\\u5165\\u5230\\u7F51\\u7AD9\\u76EE\\u5F55\",(0,n.jsx)(e.code,{children:\"cd sites/svelte.dev\"}),\"\\uFF0C\\u6267\\u884C\",(0,n.jsx)(e.code,{children:\"pnpm run dev\"}),\"\\u628A\\u7F51\\u7AD9\\u8DD1\\u8D77\\u6765\\uFF0C\\u5728\\u63A7\\u5236\\u53F0\\u4E2D\\u67E5\\u770B\\u6253\\u5370\\u7ED3\\u679C\\uFF1A \",(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-1.png\",width:\"2714\",height:\"1546\"})]}),(0,n.jsxs)(e.h3,{className:\"content-header\",id:\"parse\",children:[(0,n.jsx)(e.a,{href:\"#parse\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.span,{className:\"content-header-link\",children:(0,n.jsxs)(e.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,n.jsx)(e.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,n.jsx)(e.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"parse\"]}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"compile(str)\"}),\"\\u7684\\u5185\\u90E8\\u903B\\u8F91\\u9996\\u5148\\u662F\",(0,n.jsx)(e.code,{children:\"parse\"}),\"\\uFF0C\\u5730\\u5740\\uFF1A\",(0,n.jsx)(e.code,{children:\"packages/svelte/src/compiler/compile/index.js\"}),\"\\u3002\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token class-name console\",children:\"console\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"log\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'svelte before parse'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" source\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" ast \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"parse\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"source\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" options\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token class-name console\",children:\"console\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"log\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'svelte after parse'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" ast\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,n.jsxs)(e.div,{children:[(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-2.png\",width:\"1048\",height:\"284\"}),(0,n.jsx)(e.br,{}),(0,n.jsx)(e.code,{children:\"source\"}),\"\\u5373\\u662F\\u6211\\u4EEC\\u7684\\u6A21\\u677F\\u5B57\\u7B26\\u4E32\\uFF0C\\u5373Svelte\\u6587\\u4EF6\\u7684\\u5185\\u5BB9\\u3002\"]}),(0,n.jsxs)(e.div,{children:[(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-3.png\",width:\"1628\",height:\"1330\"}),(0,n.jsx)(e.br,{}),\"\\u7ECF\\u8FC7\\u8F6C\\u6362\\u540E\\u5F97\\u5230ast\\u5BF9\\u8C61\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"ast \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"css\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"html\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"instance\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"module\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u70B9\\u51FB\",(0,n.jsx)(e.code,{children:\"parse\"}),\"\\uFF0C\\u8FDB\\u5165\\u5230\",(0,n.jsx)(e.code,{children:\"packages/svelte/src/compiler/parse/index.js\"}),\"\\u3002\",(0,n.jsx)(e.br,{}),(0,n.jsx)(e.code,{children:\"parse\"}),\"\\u5185\\u90E8\\u6709\\u4E2A\",(0,n.jsx)(e.code,{children:\"Parser\"}),\"\\u7C7B\\uFF0C\\u901A\\u8FC7\\u5B9E\\u4F8B\\u5316\\u8BE5\\u7C7B\\uFF0C\\u5BF9\\u6A21\\u677F\\u5B57\\u7B26\\u4E32\\u6587\\u4EF6\\u8FDB\\u884C\\u89E3\\u6790\\u3002\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsx)(e.code,{className:\"language-javascript code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" parser \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Parser\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"template\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" options\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})})}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"Parser\"}),\"\\u5185\\u90E8\\u5219\\u901A\\u8FC7\\u56DB\\u79CD\\u4E0D\\u540C\\u7684\\u7C7B\\u578B\\u7684\\u8282\\u70B9\\u89E3\\u6790\\u5668\\uFF0C\\u5206\\u522B\\u662F\",(0,n.jsx)(e.code,{children:\"fragment\"}),\"\\u3001\",(0,n.jsx)(e.code,{children:\"tag\"}),\"\\u3001\",(0,n.jsx)(e.code,{children:\"mustache\"}),\"\\u548C\",(0,n.jsx)(e.code,{children:\"text\"}),\"\\u3002\\u901A\\u8FC7\\u904D\\u5386\\u6587\\u4EF6\\u7684\\u5B57\\u7B26\\u4E32\\u5185\\u5BB9\\uFF0C\\u8F6E\\u6D41\\u8C03\\u7528\\u8FD9\\u51E0\\u4E2A\\u65B9\\u6CD5\\u3002\"]}),(0,n.jsxs)(e.p,{children:[\"\\u9996\\u5148\\uFF0C\\u6211\\u4EEC\\u6CA1\\u6709\\u4F7F\\u7528\",(0,n.jsx)(e.code,{children:\"<style></style>\"}),\"\\u6807\\u7B7E\\uFF0C\\u5FFD\\u7565css\\u89E3\\u6790\\u7684\\u6B65\\u9AA4\\u3002\",(0,n.jsx)(e.br,{}),\"\\u5728\\u521D\\u59CB\\u5316\\u65F6\\uFF0C\\u9ED8\\u8BA4\\u7684html\\u5185\\u5BB9\\u6574\\u4F53\\u7684type\\u662F\",(0,n.jsx)(e.code,{children:\"Fragment\"}),\"\\u3002\\u628A\\u89E3\\u6790\\u540E\\u7684html\\u6570\\u636E\\u5B58\\u50A8\\u5230\",(0,n.jsx)(e.code,{children:\"this.html\"}),\"\\u4E2D\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"html\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"start\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword nil null\",children:\"null\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"end\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword nil null\",children:\"null\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"type\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Fragment'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"children\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u5F00\\u59CB\\u89E3\\u6790\\u6211\\u4EEC\\u7684Svelte\\u6587\\u4EF6\\u5185\\u5BB9\\uFF0C\\u6700\\u5F00\\u59CB\\u89E3\\u6790\",(0,n.jsx)(e.code,{children:\"<script>...\"}),\"\\u7684\\u6700\\u5DE6\\u4FA7\",(0,n.jsx)(e.code,{children:\"<\"}),\"\\uFF0C\\u7B26\\u5408\",(0,n.jsx)(e.code,{children:\"tag\"}),\"\\u7684\\u89E3\\u6790\\u3002\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"parser\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"match\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'<'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" tag\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u70B9\\u51FB\",(0,n.jsx)(e.code,{children:\"tag\"}),\"\\uFF0C\\u8FDB\\u5165\",(0,n.jsx)(e.code,{children:\"packages/svelte/src/compiler/parse/state/tag.js\"}),\"\\u3002\\u5F88\\u660E\\u663E\\uFF0C\",(0,n.jsx)(e.code,{children:\"script\"}),\"\\u7B26\\u5408\\u4EE5\\u4E0B\\u903B\\u8F91\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" specials \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Map\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'script'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"read\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" read_script\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"property\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'js'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'style'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"read\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" read_style\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"property\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'css'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u8C03\\u7528\",(0,n.jsx)(e.code,{children:\"read_script\"}),\"\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"read_script\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"parser\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" start\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" attributes\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token operator spread\",children:\"...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"let\"}),\" ast\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"try\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    ast \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" acorn\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"parse\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"source\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"catch\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"err\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    parser\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"acorn_error\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"err\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token operator spread\",children:\"...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"type\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Script'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    start\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"end\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" parser\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"index\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"context\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"get_context\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"parser\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" attributes\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" start\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"content\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),` ast\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u70B9\\u51FB\",(0,n.jsx)(e.code,{children:\"acorn.parse\"}),\"\\uFF0C\\u6211\\u4EEC\\u770B\\u5230\\u91CC\\u9762\\u7684\\u6838\\u5FC3\\u4FBF\\u662F\\u8C03\\u7528\",(0,n.jsx)(e.code,{children:\"code-read\"}),\"\\u7684\",(0,n.jsx)(e.code,{children:\"parse\"}),\"\\u6765\\u89E3\\u6790js\\u7684\\u5185\\u5BB9\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function function-variable\",children:\"parse\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"source\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  code_red\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"parse\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"source\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"sourceType\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'module'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"ecmaVersion\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"13\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"locations\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,n.jsxs)(e.div,{children:[\"\\u8FD9\\u90E8\\u5206\\u4FBF\\u662Fast\\u5BF9\\u8C61\\u4E2D\\u7684instance\\u5C5E\\u6027\\u4E2D\\u7684\\u5185\\u5BB9\\uFF1A \",(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-5.png\",width:\"1366\",height:\"650\"}),(0,n.jsx)(e.br,{}),\"\\u5230\\u8FD9\\u91CC\\u6211\\u4EEC\\u5DF2\\u7ECF\\u5B8C\\u6210\\u4E86\\u5BF9\",(0,n.jsx)(e.code,{children:\"<script>...<\\/script>\"}),\"\\u6807\\u7B7E\\u5185\\u5BB9\\u7684\\u89E3\\u6790\"]}),(0,n.jsx)(e.p,{children:\"\\u63A5\\u4E0B\\u6765\\u662F\\u91CD\\u70B9\\u5904\\u7406\\u7684html\\u7684\\u5185\\u5BB9\\u3002\"}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"<script><\\/script>\"}),\"\\u89E3\\u6790\\u5B8C\\u6210\\u4E4B\\u540E\\uFF0C\\u6211\\u4EEC\\u9047\\u5230\\u4E86\\u4E00\\u4E2A\\u7A7A\\u884C\\uFF0C\\u7A7A\\u5B57\\u7B26\\u4E32\\u4E5F\\u4E0D\\u80FD\\u5FFD\\u7565\\uFF0C\\u7EE7\\u7EED\\u7528fragment\\u65B9\\u6CD5\\u5224\\u65AD\\u3002\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"fragment\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"parser\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token operator spread\",children:\"...\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" text\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u4F7F\\u7528\",(0,n.jsx)(e.code,{children:\"text\"}),\"\\u65B9\\u6CD5\\u6765\\u89E3\\u6790\\u8FD9\\u4E2A\\u7A7A\\u884C\\u5185\\u5BB9\\u3002\\u8FD4\\u56DE\\u7684\\u683C\\u5F0F\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"text\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"parser\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token operator spread\",children:\"...\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" node \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    start\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"end\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" parser\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"index\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"type\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Text'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"raw\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" data\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"data\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"decode_character_references\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  parser\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"current\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"children\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"push\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"node\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsx)(e.div,{children:(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-6.png\",width:\"1668\",height:\"760\"})}),(0,n.jsxs)(e.p,{children:[\"\\u7A7A\\u884C\\u89E3\\u6790\\u5B8C\\u6210\\uFF0C\\u6211\\u4EEC\\u9047\\u5230\\u4E86\",(0,n.jsx)(e.code,{children:\"<button>\"}),\"\\u6807\\u7B7E\\uFF0C\\u6B64\\u65F6\\u4ECD\\u65E7\\u662F\\u8C03\\u7528\",(0,n.jsx)(e.code,{children:\"fragment\"}),\"\\u4E2D\\u7684\",(0,n.jsx)(e.code,{children:\"tag\"}),\"\\u65B9\\u6CD5\\u3002\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" type \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" meta_tags\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"has\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"name\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"?\"}),\" meta_tags\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"get\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"name\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" regex_capital_letter\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"test\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"name\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"||\"}),\" name \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'svelte:self'\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"||\"}),\" name \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'svelte:component'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"?\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'InlineComponent'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" name \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'svelte:fragment'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"?\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'SlotTemplate'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" name \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'title'\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"&&\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"parent_is_head\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"parser\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"stack\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"?\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Title'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" name \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'slot'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"?\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Slot'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Element'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" element \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  start\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"end\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword nil null\",children:\"null\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  type\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  name\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"attributes\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"children\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u6211\\u4EEC\\u9047\\u5230\\u7684\\u4E0D\\u662F\",(0,n.jsx)(e.code,{children:\"<script>\"}),\"\\u3001\",(0,n.jsx)(e.code,{children:\"<style>\"}),\"\\u6B64\\u7C7B\\u6807\\u7B7E\\uFF0C\\u4E5F\\u4E0D\\u662FSvelte\\u7684\\u81EA\\u5B9A\\u4E49\\u6807\\u7B7E\\uFF0C\\u6700\\u540E\\u5F97\\u5230\\u7684\\u662F\",(0,n.jsx)(e.code,{children:\"Element\"}),\"type\\u3002\"]}),(0,n.jsx)(e.p,{children:\"\\u4E4B\\u540E\\u5F00\\u59CB\\u8BFB\\u53D6\\u6807\\u7B7E\\u5185\\u5C5E\\u6027\\u7684\\u5185\\u5BB9\\uFF1A\"}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"while\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"attribute \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"read_attribute\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"parser\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" unique_names\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" is_top_level_script_or_style\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  element\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"attributes\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"push\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"attribute\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  parser\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"allow_whitespace\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" name \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" parser\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"read_until\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"regex_token_ending_character\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),\"name\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword nil null\",children:\"null\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"let\"}),\" end \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" parser\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"index\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"parser\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"allow_whitespace\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" colon_index \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" name\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"indexOf\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"':'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" type \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" colon_index \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!==\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"&&\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"get_directive_type\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"name\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"slice\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" colon_index\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"parser.read_until\"}),\"\\u8BFB\\u53D6\\u5230\",(0,n.jsx)(e.code,{children:\"on:click\"}),\"\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"get_directive_type\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"name \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'use'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Action'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"name \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'animate'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Animation'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"name \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'bind'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Binding'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"name \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'class'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Class'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"name \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'style'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'StyleDirective'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"name \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'on'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'EventHandler'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"name \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'let'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Let'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"name \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'in'\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"||\"}),\" name \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'out'\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"||\"}),\" name \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'transition'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Transition'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u901A\\u8FC7\",(0,n.jsx)(e.code,{children:\"get_directive_type\"}),\"\\u6765\\u5F97\\u5230attribute\\u7684type\\u662F\",(0,n.jsx)(e.code,{children:\"EventHandler\"}),\"\\u7C7B\\u578B\\u3002\"]}),(0,n.jsxs)(e.p,{children:[\"\\u901A\\u8FC7\",(0,n.jsx)(e.code,{children:\"read_attribute_value\"}),\"\\u6765\\u83B7\\u53D6\",(0,n.jsx)(e.code,{children:\"on:click={}\"}),\"\\u4E2D\",(0,n.jsx)(e.code,{children:\"{}\"}),\"\\u5185\\u7684\\u503C\\u3002\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"parser\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"eat\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'='\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  parser\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"allow_whitespace\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  value \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"read_attribute_value\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"parser\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" is_static\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  end \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" parser\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"index\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),` \n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u5728\",(0,n.jsx)(e.code,{children:\"read_attribute_value\"}),\"\\u5185\\u90E8\\u8C03\\u7528\",(0,n.jsx)(e.code,{children:\"read_sequence\"}),\"\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"try\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  value \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"read_sequence\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    parser\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// handle common case of quote marks existing outside of regex for performance reasons\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"quote_mark\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" parser\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"match\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"quote_mark\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),\"parser\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"match_regex\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"regex_starts_with_invalid_attr_value\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'in attribute value'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),` \n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u800C\",(0,n.jsx)(e.code,{children:\"read_sequence\"}),\"\\u5185\\u90E8\\u5219\\u8C03\\u7528\",(0,n.jsx)(e.code,{children:\"read_expression(parser);\"}),\"\\uFF0C\\u6DF1\\u6316\\u5176\\u6838\\u5FC3\\u903B\\u8F91\\uFF0C\\u6700\\u7EC8\\u662F\\u8C03\\u7528\",(0,n.jsx)(e.code,{children:\"code-red\"}),\"\\u7684\",(0,n.jsx)(e.code,{children:\"parseExpressionAt\"}),\"\\u6765\\u89E3\\u6790\",(0,n.jsx)(e.code,{children:\"{}\"}),\"\\u7684\\u5185\\u5BB9\\uFF0C\\u5C06\\u8FD9\\u90E8\\u5206\\u5185\\u5BB9\\u8D4B\\u503C\\u5230\",(0,n.jsx)(e.code,{children:\"expression\"}),\"\\u5C5E\\u6027\\u4E2D\\u3002\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"as\"}),\" code_red\"]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'code-red'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function function-variable\",children:\"parse_expression_at\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"source\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" index\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"code_red\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"parseExpressionAt\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"source\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" index\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"sourceType\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'module'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"ecmaVersion\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"13\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"locations\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,n.jsx)(e.div,{children:(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-7.png\",width:\"874\",height:\"528\"})}),(0,n.jsxs)(e.p,{children:[\"\\u6B64\\u65F6\\u6211\\u4EEC\\u5DF2\\u7ECF\\u89E3\\u6790\\u5230\",(0,n.jsx)(e.code,{children:\"<button on:click={addCount}>\"}),\"\\u3002\"]}),(0,n.jsxs)(e.div,{children:[\"\\u63A5\\u7740\\u5F80\\u4E0B\\uFF0C\\u8FD9\\u4E2A\",(0,n.jsx)(e.code,{children:\"Element\"}),\"type\\u7684children\\u503C\\u53EA\\u6709\\u4E00\\u4E2A\\u8282\\u70B9\\uFF0C\\u90A3\\u5C31\\u662Fadd\\u6587\\u6848\\u6240\\u4EE3\\u8868\\u7684Text\\u8282\\u70B9 \",(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-8.png\",width:\"1148\",height:\"522\"}),(0,n.jsx)(e.br,{}),\"\\u4E4B\\u540E\\u6211\\u4EEC\\u7B97\\u662F\\u5DF2\\u7ECF\\u89E3\\u6790\\u5230\",(0,n.jsx)(e.code,{children:\"</button>\"}),\"\\u3002\"]}),(0,n.jsxs)(e.div,{children:[\"\\u63A5\\u7740\\u5F80\\u4E0B\\u6211\\u4EEC\\u9047\\u5230\",(0,n.jsx)(e.code,{children:\"count:\"}),\"\\uFF0C\\u540C\\u6837\\u662F\",(0,n.jsx)(e.code,{children:\"Text\"}),\"\\u8282\\u70B9\\u3002 \",(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-9.png\",width:\"1134\",height:\"614\"})]}),(0,n.jsxs)(e.p,{children:[\"\\u63A5\\u7740\\u9047\\u5230\",(0,n.jsx)(e.code,{children:\"{\"}),\"\\uFF0C\\u7EE7\\u7EED\\u8C03\\u7528\",(0,n.jsx)(e.code,{children:\"fragment\"}),\"\\u5185\\u7684\",(0,n.jsx)(e.code,{children:\"mustache\"}),\"\\u65B9\\u6CD5\\uFF0C\\u89E3\\u6790\\u5F97\\u5230\",(0,n.jsx)(e.code,{children:\"MustacheTag\"}),\"\\u7C7B\\u578B\\u7684\\u8282\\u70B9\\u3002\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" expression \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"read_expression\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"parser\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"parser\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"allow_whitespace\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"parser\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"eat\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'}'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"parser\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"current\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"children\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"push\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  start\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"end\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" parser\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"index\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"type\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'MustacheTag'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`  expression\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,n.jsx)(e.div,{children:(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-10.png\",width:\"1250\",height:\"610\"})}),(0,n.jsxs)(e.h3,{className:\"content-header\",id:\"component\",children:[(0,n.jsx)(e.a,{href:\"#component\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.span,{className:\"content-header-link\",children:(0,n.jsxs)(e.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,n.jsx)(e.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,n.jsx)(e.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"Component\"]}),(0,n.jsxs)(e.p,{children:[\"\\u6267\\u884C\\u5B8C\",(0,n.jsx)(e.code,{children:\"const ast = parse(source, options);\"}),\"\\u540E\\uFF0C\\u6211\\u4EEC\\u8FDB\\u5165\\u4E0B\\u4E00\\u6B65\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" component \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Component\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  ast\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  source\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  options\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"name\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"||\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"get_name_from_filename\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"options\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"filename\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"||\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Component'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  options\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  stats\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`  warnings\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"Component\"}),\"\\u4E2D\\u51E0\\u4E2A\\u5173\\u952E\\u7684\\u6B65\\u9AA4\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"walk_module_js\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"walk_instance_js_pre_template\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"fragment\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Fragment\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" ast\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"html\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"walk_instance_js_post_template\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u6211\\u4EEC\\u6CA1\\u6709\\u58F0\\u660E\\u8FC7\",(0,n.jsx)(e.code,{children:\"context='module'\"}),\"\\u7684script\\u5185\\u5BB9\\uFF0C\\u6240\\u4EE5\\u8DF3\\u8FC7\",(0,n.jsx)(e.code,{children:\"walk_module_js\"}),\"\\u3002\"]}),(0,n.jsxs)(e.p,{children:[\"\\u5728\",(0,n.jsx)(e.code,{children:\"walk_instance_js_pre_template\"}),\"\\u4E2D\\u8C03\\u7528\",(0,n.jsx)(e.code,{children:\"create_scopes\"}),\"\\u6765\\u89E3\\u6790script\\u6807\\u7B7E\\u5185\\u7684\\u4F5C\\u7528\\u57DF\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsx)(e.code,{className:\"language-javascript code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"scope\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" instance_scope\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" map\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" globals \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"create_scopes\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"script\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"content\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})})}),(0,n.jsxs)(e.p,{children:[\"\\u53EF\\u4EE5\\u628A\\u8FD9\\u4E9B\\u53D8\\u91CF\\u6253\\u5370\\u51FA\\u6765\\u770B\\u4E0B\",(0,n.jsx)(e.code,{children:\"console.log('svelte Component walk_instance_js_pre_template', instance_scope, map, globals);\"})]}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"create_scopes\"}),\"\\u5185\\u90E8\\u662F\\u4F7F\\u7528\\u4E86\",(0,n.jsx)(e.code,{children:\"periscopic\"}),\"\\u7684\",(0,n.jsx)(e.code,{children:\"analyse\"}),\"\\u65B9\\u6CD5\\u3002\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" analyze\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Scope\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" extract_names\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" extract_identifiers \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'periscopic'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token comment doc-comment\",children:`/**\n`})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token comment doc-comment\",children:[\" * \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"@param\"}),\" \",(0,n.jsxs)(e.span,{className:\"token class-name\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'estree'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Node\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token parameter\",children:\"expression\"}),`\n`]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment doc-comment\",children:\" */\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"create_scopes\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"expression\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"analyze\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"expression\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsx)(e.div,{children:(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-11.png\",width:\"1295\",height:\"730\"})}),(0,n.jsxs)(e.p,{children:[\"\\u8C03\\u7528\",(0,n.jsx)(e.code,{children:\"this.add_var()\"}),\"\\u5C06\\u53D8\\u91CF\\u5B58\\u5165\",(0,n.jsx)(e.code,{children:\"vars\"}),\"\\u4E2D\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"add_var\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"node\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" variable\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" add_to_lookup \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"vars\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"push\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"variable\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"add_to_lookup\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"var_lookup\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"has\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"variable\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" exists_var \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"var_lookup\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"get\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"variable\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"exists_var\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"module\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"&&\"}),\" exists_var\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"imported\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"error\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token comment doc-comment\",children:[\"/** \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"@type\"}),\" \",(0,n.jsxs)(e.span,{className:\"token class-name\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"any\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" */\"]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"node\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" compiler_errors\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"illegal_variable_declaration\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"var_lookup\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"set\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"variable\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" variable\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"\\u6253\\u5370\\u51FA\\u6765\\u770B\\u4E0B\\uFF1A\"}),(0,n.jsx)(e.pre,{className:\"language-diff\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-diff\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` this.walk_instance_js_pre_template();\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line inserted\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token prefix inserted\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:` console.log('svelte Component this', this);\n`})]})]})]})}),(0,n.jsx)(e.div,{children:(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-12.png\",width:\"1479\",height:\"816\"})}),(0,n.jsxs)(e.p,{children:[\"\\u6267\\u884C\\u5B8C\",(0,n.jsx)(e.code,{children:\"this.walk_instance_js_pre_template();\"}),\"\\uFF0C\\u7EE7\\u7EED\\u4E0B\\u4E00\\u6B65\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsx)(e.code,{className:\"language-javascript code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"fragment\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Fragment\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" ast\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"html\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})})}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"Fragment\"}),\"\\u5185\\u90E8\\uFF0C\\u6267\\u884C\",(0,n.jsx)(e.code,{children:\"map_children\"}),\"\\u65B9\\u6CD5\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Fragment\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Node\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"constructor\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"component\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" info\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" scope \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"TemplateScope\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"super\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"component\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword nil null\",children:\"null\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" scope\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" info\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"scope\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" scope\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"children\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"map_children\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"component\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" scope\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" info\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"children\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsx)(e.pre,{className:\"language-diff\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-diff\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` this.children = map_children(component, this, scope, info.children);\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line inserted\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token prefix inserted\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:` console.log('svelte Fragment children', this.children);\n`})]})]})]})}),(0,n.jsx)(e.div,{children:(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-13.png\",width:\"916\",height:\"120\"})}),(0,n.jsxs)(e.div,{children:[\"\\u628A\\u6570\\u7EC4\\u7684\\u6BCF\\u9879\\u5C55\\u5F00\\u770B\\u4E0B\\uFF1A \",(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-14.png\",width:\"974\",height:\"260\"}),\" \",(0,n.jsx)(e.img,{alt:\"alt text\",src:\"/images/svelte/37-15.png\"}),\" \",(0,n.jsx)(e.img,{alt:\"alt text\",src:\"/images/svelte/37-16.png\"}),\" \",(0,n.jsx)(e.img,{alt:\"alt text\",src:\"/images/svelte/37-17.png\"})]}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"map_children\"}),\"\\u7684\\u4F5C\\u7528\\u662F\\u5C06ast\\u4E2D\\u7684\\u8282\\u70B9\\u8FDB\\u884C\\u8F6C\\u6362\\u3002\"]}),(0,n.jsxs)(e.p,{children:[\"\\u6267\\u884C\\u5B8C\",(0,n.jsx)(e.code,{children:\"new Fragment()\"}),\"\\uFF0C\\u7EE7\\u7EED\\u4E0B\\u4E00\\u6B65\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"walk_instance_js_post_template\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" script \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"ast\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"instance\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),\"script\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"post_template_walk\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"hoist_instance_declarations\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"extract_reactive_declarations\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"check_if_tags_content_dynamic\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u6267\\u884C\",(0,n.jsx)(e.code,{children:\"walk_instance_js_post_template\"}),\"\\u4E2D\\u7684\",(0,n.jsx)(e.code,{children:\"this.post_template_walk\"}),\" walk\\u7684content\\u5C31\\u662Fast.instance.content\\u7684\\u5185\\u5BB9\\u3002\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"post_template_walk\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" script \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"ast\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"instance\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),\"script\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" component \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" content \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" script\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token operator spread\",children:\"...\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"walk\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"content\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"enter\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"node\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" parent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" prop\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" index\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"leave\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"node\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.div,{children:[\"\\u628Acontent\\u6253\\u5370\\u51FA\\u6765\\u770B\\u4E0B\\uFF1A \",(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-18.png\",width:\"970\",height:\"828\"})]}),(0,n.jsxs)(e.p,{children:[\"\\u8FD9\\u4E2A\",(0,n.jsx)(e.code,{children:\"walk_instance_js_post_template\"}),\"\\u7684\\u4E3B\\u8981\\u4F5C\\u7528\\u662F\\uFF1A \\u5BF9\\u8282\\u70B9\\u8FDB\\u884C\\u4E00\\u4E9B\\u989D\\u5916\\u7684\\u68C0\\u67E5\\uFF0C\\u4F8B\\u5982\\u68C0\\u67E5\\u662F\\u5426\\u6709\\u672A\\u5173\\u95ED\\u7684\\u6807\\u7B7E\\uFF0C\\u662F\\u5426\\u6709\\u4E0D\\u5408\\u6CD5\\u7684\\u5C5E\\u6027\\u7B49\\u3002 \\u5BF9\\u8282\\u70B9\\u8FDB\\u884C\\u4E00\\u4E9B\\u4F18\\u5316\\uFF0C\\u4F8B\\u5982\\u79FB\\u9664\\u4E0D\\u5FC5\\u8981\\u7684\\u7A7A\\u767D\\u8282\\u70B9\\uFF0C\\u5408\\u5E76\\u8FDE\\u7EED\\u7684\\u6587\\u672C\\u8282\\u70B9\\u7B49\\u3002 \\u6536\\u96C6\\u4E00\\u4E9B\\u4FE1\\u606F\\uFF0C\\u4F8B\\u5982\\u6536\\u96C6\\u6240\\u6709\\u4F7F\\u7528\\u7684\\u7EC4\\u4EF6\\uFF0C\\u6536\\u96C6\\u6240\\u6709\\u7684\\u4F9D\\u8D56\\u7B49\\u3002\"]}),(0,n.jsx)(e.pre,{className:\"language-diff\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-diff\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`const component = new Component(\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` ast,\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` source,\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` options.name || get_name_from_filename(options.filename) || 'Component',\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` options,\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` stats,\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` warnings\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),`);\n`]}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token prefix inserted\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`  console.log('svelte component', component);\n`})]})})]})}),(0,n.jsxs)(e.div,{children:[\"\\u628A\",(0,n.jsx)(e.code,{children:\"new Component()\"}),\"\\u7684\\u7ED3\\u679C\\u6253\\u5370\\u51FA\\u6765\\u770B\\u4E0B\\uFF1A \",(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-19.png\",width:\"1586\",height:\"738\"})]}),(0,n.jsxs)(e.h3,{className:\"content-header\",id:\"render_dom\",children:[(0,n.jsx)(e.a,{href:\"#render_dom\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.span,{className:\"content-header-link\",children:(0,n.jsxs)(e.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,n.jsx)(e.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,n.jsx)(e.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"render_dom\"]}),(0,n.jsxs)(e.p,{children:[\"\\u5F80\\u4E0B\\u6267\\u884C\",(0,n.jsx)(e.code,{children:\"render_dom\"}),\"\\uFF0C\\u67E5\\u770B\\u4E0B\",(0,n.jsx)(e.code,{children:\"render_dom\"}),\"\\u7684\\u6267\\u884C\\u903B\\u8F91\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" result \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  options\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"generate\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"?\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword nil null\",children:\"null\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" options\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"generate\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'ssr'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"?\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"render_ssr\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"component\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" options\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"render_dom\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"component\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" options\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u70B9\\u51FB\",(0,n.jsx)(e.code,{children:\"render_dom\"}),\"\\u8FDB\\u5165\\u5185\\u90E8\\uFF0C\\u5185\\u90E8\\u6709\\u4E2A\",(0,n.jsx)(e.code,{children:\"Renderer\"}),\"\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsx)(e.code,{className:\"language-javascript code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" renderer \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Renderer\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"component\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" options\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})})}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"Renderer\"}),\"\\u5185\\u90E8\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"block\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Block\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"renderer\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword nil null\",children:\"null\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"type\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'component'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"key\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword nil null\",children:\"null\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"bindings\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Map\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"dependencies\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Set\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"block\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"has_update_method\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"fragment\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"FragmentWrapper\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"block\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  component\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"fragment\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"children\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword nil null\",children:\"null\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword nil null\",children:\"null\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"fragment\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"render\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"block\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword nil null\",children:\"null\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsxs)(e.span,{className:\"token comment doc-comment\",children:[\"/** \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"@type\"}),\" \",(0,n.jsxs)(e.span,{className:\"token class-name\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'estree'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Identifier\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" */\"]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"x\",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"#nodes\"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u770B\\u4E0B\",(0,n.jsx)(e.code,{children:\"Block\"}),\"\\u7684\\u5B9E\\u73B0\\uFF0C\",(0,n.jsx)(e.code,{children:\"Block\"}),\"\\u7684\",(0,n.jsx)(e.code,{children:\"constructor\"}),\"\\u5982\\u4E0B\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"constructor\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"options\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"parent\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" options\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"parent\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"renderer\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" options\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"renderer\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"name\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" options\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"type\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" options\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"type\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"comment\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" options\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"comment\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"wrappers\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// for keyed each blocks\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"key\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" options\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"key\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"first\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword nil null\",children:\"null\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"bindings\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" options\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"bindings\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"chunks\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"declarations\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"init\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"create\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"claim\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"hydrate\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"mount\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"measure\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"restore_measurements\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"fix\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"animate\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"intro\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"update\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"outro\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"destroy\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"has_animation\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"has_intro_method\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// a block could have an intro method but not intro transitions, e.g. if a sibling block has intros\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"has_outro_method\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"outros\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"get_unique_name\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"renderer\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"component\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"get_unique_name_maker\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"aliases\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Map\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"key\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"aliases\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"set\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'key'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"get_unique_name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'key'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.div,{children:[(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-20.png\",width:\"1070\",height:\"711\"}),\" \\u7528\\u6765\\u8868\\u793A\\u4E00\\u4E2A\\u4EE3\\u7801\\u5757\\u7684\\u7C7B\\uFF0C\\u5B83\\u5305\\u542B\\u4E86\\u4E00\\u4E9B\\u5173\\u4E8E\\u8FD9\\u4E2A\\u4EE3\\u7801\\u5757\\u7684\\u4FE1\\u606F\\uFF0C\\u4F8B\\u5982\\u5B83\\u7684\\u7C7B\\u578B\\uFF0C\\u5B83\\u7684\\u4F9D\\u8D56\\uFF0C\\u5B83\\u7684\\u7ED1\\u5B9A\\u7B49\\u3002\"]}),(0,n.jsxs)(e.p,{children:[\"\\u4E86\\u89E3\\u5B8C\",(0,n.jsx)(e.code,{children:\"Block\"}),\"\\uFF0C\\u4E0B\\u4E00\\u6B65\",(0,n.jsx)(e.code,{children:\"FragmentWrapper\"}),\"\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"fragment\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"FragmentWrapper\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"block\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  component\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"fragment\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"children\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword nil null\",children:\"null\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword nil null\",children:\"null\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"Svelte\\u5185\\u90E8\\u7528\\u6765\\u8868\\u793A\\u4E00\\u4E2A\\u6A21\\u677F\\u7247\\u6BB5\\u7684\\u7C7B\\uFF0C\\u5B83\\u5305\\u542B\\u4E86\\u4E00\\u4E9B\\u5173\\u4E8E\\u8FD9\\u4E2A\\u6A21\\u677F\\u7247\\u6BB5\\u7684\\u4FE1\\u606F\\uFF0C\\u4F8B\\u5982\\u5B83\\u7684\\u5B50\\u8282\\u70B9\\uFF0C\\u5B83\\u7684\\u7236\\u8282\\u70B9\\u7B49\\u3002\"}),(0,n.jsx)(e.p,{children:\"\\u7EE7\\u7EED\\u4E0B\\u4E00\\u6B65\\uFF1A\"}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsx)(e.code,{className:\"language-javascript code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"fragment\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"render\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"block\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword nil null\",children:\"null\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsxs)(e.span,{className:\"token comment doc-comment\",children:[\"/** \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"@type\"}),\" \",(0,n.jsxs)(e.span,{className:\"token class-name\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'estree'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Identifier\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" */\"]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"x\",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"#nodes\"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})})}),(0,n.jsxs)(e.p,{children:[\"\\u5C31\\u662F\",(0,n.jsx)(e.code,{children:\"FragmentWrapper\"}),\"\\u5185\\u90E8\\u7684\",(0,n.jsx)(e.code,{children:\"render\"}),\"\\u65B9\\u6CD5\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"render\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"block\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" parent_node\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" parent_nodes\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"for\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"let\"}),\" i \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" i \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"nodes\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"length\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" i \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"+=\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"nodes\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"i\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"render\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"block\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" parent_node\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" parent_nodes\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsx)(e.div,{children:(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-21.png\",width:\"848\",height:\"126\"})}),(0,n.jsx)(e.p,{children:\"\\u8FD9\\u91CC\\u7684nodes\\u662F\\u8C03\\u7528\\u5404\\u4E2A\\u7C7B\\u578B\\u7684wrapper\\u5B9E\\u4F8B\\u5316\\u540E\\u7684\\u5BF9\\u8C61\\uFF0C\\u6BCF\\u4E2Awrapper\\u7C7B\\u6709\\u81EA\\u5DF1\\u7684render\\u65B9\\u6CD5\\uFF1A\"}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" wrappers \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"AwaitBlock\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Body\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Comment\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"DebugTag\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Document\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"EachBlock\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Element\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Head\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"IfBlock\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"InlineComponent\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"KeyBlock\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"MustacheTag\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"Options\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword nil null\",children:\"null\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"RawMustacheTag\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Slot\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"SlotTemplate\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Text\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Title\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Window\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"\\u7B80\\u5355\\u770B\\u4E00\\u4E9Bwrapper\\u7684\\u5B9E\\u73B0\\uFF0C\\u6BD4\\u5982Text Wrapper\\uFF1A\"}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"render\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"block\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" parent_node\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" parent_nodes\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"skip\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" use_space \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"use_space\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" string_literal \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"type\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Literal'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"value\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"data\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"loc\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"start\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"renderer\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"locate\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"node\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"start\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"end\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"renderer\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"locate\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"node\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"end\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  block\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"add_element\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"var\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    use_space \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"?\"}),\" x\",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"@space()\"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" x\",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"@text(\"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"string_literal\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    parent_nodes \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"&&\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`use_space\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"?\"}),\" x\",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"@claim_space(\"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"parent_nodes\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" x\",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"@claim_text(\"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"parent_nodes\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\", \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"string_literal\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token comment doc-comment\",children:[\"/** \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"@type\"}),\" \",(0,n.jsxs)(e.span,{className:\"token class-name\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'estree'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Identifier\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" */\"]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"parent_node\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u8FD9\\u91CC\\u8C03\\u7528\\u4E86\",(0,n.jsx)(e.code,{children:\"code-red\"}),\"\\u7684\",(0,n.jsx)(e.code,{children:\"x\"}),\"\\u65B9\\u6CD5\\uFF0C\\u628A\\u5185\\u5BB9\\u6253\\u5370\\u51FA\\u6765\\u770B\\u4E0B\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-diff\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-diff\",children:[(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token prefix inserted\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:\" console.log('svelte text wrapper render', x`@text(${string_literal})`);\\n\"})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token inserted inserted-sign\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` block.add_element(\n`})]})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` this.var,\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:\" use_space ? x`@space()` : x`@text(${string_literal})`,\\n\"})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` ...\n`})]})})]})}),(0,n.jsx)(e.div,{children:(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-22.png\",width:\"1734\",height:\"736\"})}),(0,n.jsxs)(e.p,{children:[\"Element\\u7684\",(0,n.jsx)(e.code,{children:\"render\"}),\"\\u65B9\\u6CD5\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"render\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"block\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" parent_node\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" parent_nodes\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"child_dynamic_element\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"render_dynamic_element\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"block\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" parent_node\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" parent_nodes\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"else\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"render_element\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"block\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" parent_node\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" parent_nodes\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u770B\\u4E0B\\u8FD9\\u4E2A\",(0,n.jsx)(e.code,{children:\"render_element\"}),\"\\u7684\\u5B9E\\u73B0\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"render_element\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"block\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" parent_node\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" parent_nodes\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" renderer \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" hydratable \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" renderer\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"options\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"hydratable\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"node\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"name\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'noscript'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" node \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"var\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" nodes \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" parent_nodes \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"&&\"}),\" block\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"get_unique_name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"var\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\"_nodes\"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" children \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" x\",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"@children(\"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"node\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"name\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'template'\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"?\"}),\" x\",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"node\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\".content\"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" node\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  block\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"add_variable\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"node\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" render_statement \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"get_render_statement\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"block\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  block\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"chunks\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"create\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"push\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"b\",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"node\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\" = \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"render_statement\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\";\"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" can_use_textcontent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" can_optimise_to_html_string\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" can_optimise_hydration \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"node\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token operator spread\",children:\"...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"parent_node\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token operator spread\",children:\"...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"else\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" insert \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" b\",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"@insert(#target, \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"node\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\", #anchor);\"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"insert\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"expression\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"callee\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"loc\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"start\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"renderer\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"locate\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"node\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"start\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"end\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"renderer\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"locate\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"node\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"end\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    block\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"chunks\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"mount\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"push\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"insert\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    block\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"chunks\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"destroy\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"push\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"b\",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"if (detaching) @detach(\"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"node\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\");\"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"can_optimise_to_html_string \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"&&\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),\"hydratable \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"||\"}),\" can_optimise_hydration\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"fragment\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"nodes\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"length\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"&&\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"fragment\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"nodes\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"node\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"type\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Text'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsxs)(e.span,{className:\"token comment doc-comment\",children:[\"/** \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"@type\"}),\" \",(0,n.jsxs)(e.span,{className:\"token class-name\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'estree'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Node\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" */\"]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"let\"}),\" text \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"string_literal\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsxs)(e.span,{className:\"token comment doc-comment\",children:[\"/** \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"@type\"}),\" \",(0,n.jsxs)(e.span,{className:\"token class-name\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'../Text.js'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"default\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" */\"]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"fragment\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"nodes\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"data\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token operator spread\",children:\"...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      block\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"chunks\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"create\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"push\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"b\",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"node\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\".textContent = \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"text\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\";\"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token operator spread\",children:\"...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"else\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token operator spread\",children:\"...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"else\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"fragment\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"nodes\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"forEach\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"child\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      child\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"render\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"block\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"node\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"name\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'template'\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"?\"}),\" x\",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"node\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\".content\"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" node\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" nodes\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"element_data_name\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"element_data_name\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`  \n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token operator spread\",children:\"...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  block\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"renderer\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"dirty\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"node\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"tag_expr\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"dynamic_dependencies\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u6211\\u4EEC\\u5C1D\\u8BD5\\u628A\\u5B83\\u7684\",(0,n.jsx)(e.code,{children:\"children\"}),\"\\u6253\\u5370\\u51FA\\u6765\\u770B\\u4E0B\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-diff\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-diff\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`const node = this.var;\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:\" const nodes = parent_nodes && block.get_unique_name(`${this.var.name}_nodes`); // if we're in unclaimable territory, i.e. <head>, parent_nodes is null\\n\"})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:\" const children = x`@children(${this.node.name === 'template' ? x`${node}.content` : node})`;\\n\"})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` block.add_variable(node);\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line inserted\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token prefix inserted\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:` console.log('svelte render_element children', children);\n`})]})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token inserted inserted-sign\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` const render_statement = this.get_render_statement(block);\n`})]})]})]})}),(0,n.jsx)(e.div,{children:(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-23.png\",width:\"1816\",height:\"506\"})}),(0,n.jsx)(e.pre,{className:\"language-diff\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-diff\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:\" const insert = b`@insert(#target, ${node}, #anchor);`;\\n\"})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` /** @type {import('estree').CallExpression} */ (\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   /** @type {import('estree').ExpressionStatement} */ (insert[0]).expression\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` ).callee.loc = {\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   start: this.renderer.locate(this.node.start),\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   end: this.renderer.locate(this.node.end)\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` };\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` block.chunks.mount.push(insert);\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:\" block.chunks.destroy.push(b`if (detaching) @detach(${node});`);\\n\"})]})}),(0,n.jsxs)(e.span,{className:\"code-line inserted\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token prefix inserted\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:\" console.log('svelte render_element insert', insert, node, b`if (detaching) @detach(${node});`)\\n\"})]})]})]})}),(0,n.jsxs)(e.div,{children:[(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-24.png\",width:\"2178\",height:\"718\"}),\" \",(0,n.jsx)(e.img,{alt:\"alt text\",src:\"/images/svelte/37-25.png\"})]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"fragment\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"nodes\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"forEach\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"child\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  child\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"render\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"block\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"node\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"name\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'template'\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"?\"}),\" x\",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"node\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\".content\"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" node\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" nodes\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"element_data_name\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"element_data_name\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u4F9D\\u6B21\\u8C03\\u7528\",(0,n.jsx)(e.code,{children:\"render\"}),\"\\u65B9\\u6CD5\\u3002\"]}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"MustachTag\"}),\"\\u7684\",(0,n.jsx)(e.code,{children:\"render\"}),\"\\u65B9\\u6CD5\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"render\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"block\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" parent_node\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" parent_nodes\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" data\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" contenteditable_attributes \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"parent\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"instanceof\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"ElementWrapper\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"&&\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"parent\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"attributes\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"filter\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"a\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),\" a\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"node\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"name\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'contenteditable'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" spread_attributes \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"parent\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"instanceof\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"ElementWrapper\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"&&\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"parent\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"attributes\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"filter\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"a\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),\" a\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"node\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"is_spread\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token operator spread\",children:\"...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" init \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"rename_this_method\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"block\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"value\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"contenteditable_attr_value\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token operator spread\",children:\"...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"else\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" x\",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"@set_data(\"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"var\"}),(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\", \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"value\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  block\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"add_element\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"var\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    x\",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"@text(\"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"init\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    parent_nodes \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"&&\"}),\" x\",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"@claim_text(\"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"parent_nodes\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\", \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"init\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`    parent_node\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsx)(e.pre,{className:\"language-diff\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-diff\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`const { init } = this.rename_this_method(block, (value) => {\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` if (contenteditable_attr_value) {\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   if (contenteditable_attr_value === true) {\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:\"     return x`@set_data_contenteditable(${this.var}, ${value})`;\\n\"})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   } else {\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:\"     return x`@set_data_maybe_contenteditable(${this.var}, ${value}, ${contenteditable_attr_value})`;\\n\"})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   }\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` } else {\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line inserted\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token prefix inserted\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:\"   console.log('svelte mustachetag rename_this_method', x`@set_data(${this.var}, ${value})`, this.var, value);\\n\"})]})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token inserted inserted-sign\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:\"   return x`@set_data(${this.var}, ${value})`;\\n\"})]})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` }\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),`});\n`]})]})}),(0,n.jsx)(e.div,{children:(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-26.png\",width:\"2414\",height:\"1330\"})}),(0,n.jsxs)(e.p,{children:[\"\\u8FD4\\u56DE\\u5230\",(0,n.jsx)(e.code,{children:\"packages/svelte/src/compiler/compile/render_dom/index.js\"})]}),(0,n.jsx)(e.pre,{className:\"language-diff\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-diff\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`export default function dom(component, options) {\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` const { name } = component;\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` const renderer = new Renderer(component, options);\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line inserted\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token prefix inserted\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:` console.log('svelte renderer', renderer);\n`})]})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token inserted inserted-sign\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` const { block } = renderer;\n`})]})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` ...\n`})]})})]})}),(0,n.jsxs)(e.div,{children:[(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-27.png\",width:\"2392\",height:\"1290\"}),\" \\u5728\\u521A\\u624D\\u67E5\\u770B\\u5404\\u4E2Arender\\u65B9\\u6CD5\\u65F6\\uFF0C\\u6211\\u4EEC\\u6CE8\\u610F\\u5230\\u5B83\\u4E00\\u76F4\\u5728\\u64CD\\u4F5C\",(0,n.jsx)(e.code,{children:\"block.chunk\"}),\"\\uFF0C\\u73B0\\u5728\\u6211\\u4EEC\\u53EF\\u4EE5\\u770B\\u5230\\u4E0A\\u9762\\u7684\",(0,n.jsx)(e.code,{children:\"create\"}),\"\\u3001\",(0,n.jsx)(e.code,{children:\"mount\"}),\"\\u3001\",(0,n.jsx)(e.code,{children:\"update\"}),\"\\u548C\",(0,n.jsx)(e.code,{children:\"destroy\"}),\"\\u4E0A\\u7684\\u903B\\u8F91\\u4EE3\\u7801\\u5DF2\\u51C6\\u5907\\u5C31\\u7EEA\\u3002\\u6211\\u4EEC\\u4E5F\\u77E5\\u9053\\u4E86\",(0,n.jsx)(e.code,{children:\"render_dom\"}),\"\\u7684\\u4E3B\\u8981\\u4F5C\\u7528\\u5C31\\u662F\\u628A\\u4EE3\\u7801\\u8F6C\\u5316\\u6210\\u80FD\\u771F\\u6B63\\u6302\\u8F7D\\u5230\\u9875\\u9762\\u4E0A\\u7684\\u8282\\u70B9\\uFF0C\\u540C\\u65F6\\u5904\\u7406\\u4E86\\u9875\\u9762\\u7684\\u5404\\u4E2A\\u751F\\u547D\\u5468\\u671F\\u3002\"]}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"render_dom\"}),\"\\u4E2D\\u4E00\\u6BB5\\u975E\\u5E38\\u91CD\\u8981\\u7684\\u89E3\\u6790\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"walk\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"component\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"ast\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"instance\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"content\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"enter\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"node\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token operator spread\",children:\"...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"leave\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"node\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"map\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"has\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"node\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      scope \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" scope\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"parent\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"execution_context \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" node\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      execution_context \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword nil null\",children:\"null\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"node\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"type\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'AssignmentExpression'\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"||\"}),\" node\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"type\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'UpdateExpression'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" assignee \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" node\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"type\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'AssignmentExpression'\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"?\"}),\" node\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"left\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" node\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"argument\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// normally (`a = 1`, `b.c = 2`), there'll be a single name\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// (a or b). In destructuring cases (`[d, e] = [e, d]`) there\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// may be more, in which case we need to tack the extra ones\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// onto the initial function call\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" names \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Set\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"extract_names\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token comment doc-comment\",children:[\"/** \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"@type\"}),\" \",(0,n.jsxs)(e.span,{className:\"token class-name\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'estree'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Node\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" */\"]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"assignee\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"replace\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"invalidate\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"renderer\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" scope\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" node\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" names\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" execution_context \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword nil null\",children:\"null\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u5927\\u5BB6\\u5BF9\",(0,n.jsx)(e.code,{children:\"this.replace\"}),\"\\u8FD8\\u6709\\u5370\\u8C61\\u5417\\uFF1F\\u4E0D\\u9519\\uFF0C\\u6211\\u4EEC\\u5728\\u300A\\u5E93\\u300B\\u7AE0\\u8282\\u6F14\\u793Aestree-walk\\u65F6\\u6F14\\u793A\\u8FC7\\u8FD9\\u4E2A\\u65B9\\u6CD5\\uFF0C\",(0,n.jsx)(e.code,{children:\"this.replace(invalidate(renderer, scope, node, names, execution_context === null))\"}),\"\\u5BF9Svelte\\u6587\\u4EF6\\u4E2D\\u6D89\\u53CA\\u5230\\u66F4\\u65B0\\u7684\\u4EE3\\u7801\\u8FDB\\u884C\\u66FF\\u6362\\uFF0C\\u66FF\\u6362\\u6210\",(0,n.jsx)(e.code,{children:\"$$invalidate\"}),\"\\u76F8\\u5173\\u5F62\\u5F0F\\u7684\\u4EE3\\u7801\\u3002\"]}),(0,n.jsxs)(e.p,{children:[\"\\u67E5\\u770B\\u4E0Binvalidate\\u7684\\u903B\\u8F91\\uFF0C\",(0,n.jsx)(e.code,{children:\"packages/svelte/src/compiler/compile/render_dom/invalidate.js\"}),\"\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-diff\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-diff\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:\"invalidate = x`$$invalidate(${\\n\"}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` renderer.context_lookup.get(head.name).index\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),\"}, ${node}, ${extra_args})`;\\n\"]}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token prefix inserted\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:` console.log('svelte invalidate', invalidate, renderer.context_lookup, node);\n`})]})})]})}),(0,n.jsx)(e.div,{children:(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-28.png\",width:\"2058\",height:\"1048\"})}),(0,n.jsxs)(e.p,{children:[\"\\u7EE7\\u7EED\\u56DE\\u5230\",(0,n.jsx)(e.code,{children:\"render_dom\"}),\"\\u65B9\\u6CD5\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" has_create_fragment \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" component\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"compile_options\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"dev\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"||\"}),\" block\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"has_content\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"has_create_fragment\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  body\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"push\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"b\",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`    function create_fragment(#ctx) {\n`})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"block\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"get_contents\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`    }\n`})})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"  \"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.div,{children:[\"\\u5F88\\u660E\\u663E\\uFF0C\\u8FD9\\u6BB5\\u5C31\\u662F\\u5230\\u65F6\\u4F1A\\u7F16\\u8BD1\\u5230\\u9875\\u9762\\u4E0A\\u7684\",(0,n.jsx)(e.code,{children:\"create_fragment\"}),\"\\u65B9\\u6CD5\\u3002\\u6211\\u4EEC\\u53EF\\u4EE5\\u628A\",(0,n.jsx)(e.code,{children:\"block.get_contents\"}),\"\\u6253\\u5370\\u51FA\\u6765\\u770B\\u4E00\\u4E0B \",(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-29.png\",width:\"1548\",height:\"796\"}),\" \\u7B14\\u8005\\u4E4B\\u524D\\u90FD\\u662F\\u4F7F\\u7528console.log\\u8FD9\\u79CD\\u7C97\\u66B4\\u76F4\\u63A5\\u7684\\u65B9\\u6CD5\\u6765\\u8FDB\\u884C\\u6F14\\u793A\\uFF0C\\u4E00\\u662F\\u5FEB\\u901F\\u76F4\\u63A5\\uFF0C\\u4E8C\\u662F\\u5728\\u63A7\\u5236\\u53F0\\u4E2D\\u6253\\u5370\\u51FA\\u6570\\u636E\\u7684\\u5168\\u8C8C\\u4FBF\\u4E8E\\u6D4F\\u89C8\\u3002\\u5982\\u679C\\u8BFB\\u8005\\u5BF9\\u65AD\\u70B9\\u8C03\\u8BD5\\u5F97\\u5FC3\\u5E94\\u624B\\uFF0C\\u4E5F\\u53EF\\u50CF\\u4E0A\\u56FE\\u822C\\u5BF9\\u5404\\u4E2A\\u5173\\u952E\\u8282\\u70B9\\u8FDB\\u884C\\u6253\\u65AD\\u70B9\\u8C03\\u8BD5\\u3002\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" condition \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),\"uses_rest_or_props \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"&&\"}),\" writable\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"length\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"&&\"}),\" renderer\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"dirty\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"writable\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"let\"}),\" statement \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" d\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"node\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"condition\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  statement \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsxs)(e.span,{className:\"token comment doc-comment\",children:[\"/** \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"@type\"}),\" \",(0,n.jsxs)(e.span,{className:\"token class-name\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'estree'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Statement\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" */\"]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    b\",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"if (\"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"condition\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\") { \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"statement\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\" }\"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"\\u6B64\\u6BB5\\u4EE3\\u7801\\u662F\\u7528\\u6765\\u7F16\\u8BD1\\u6761\\u4EF6\\u5224\\u65ADifblock\\u7684\\u5C55\\u793A\\u3002\"}),(0,n.jsx)(e.p,{children:\"\\u7EE7\\u7EED\\u5F80\\u4E0B\\uFF1A\"}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"body\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"push\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"b\",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"  function \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"definition\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"args\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:`) {\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"    \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"injected\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"map\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),\" b\",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"let \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"name\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\";\"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"    \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"rest\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"    \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"reactive_store_declarations\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"    \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"reactive_store_subscriptions\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"    \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"resubscribable_reactive_store_unsubscribers\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"    \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),`\n`]})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[\"      component\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"slots\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"size\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"||\"}),\" component\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"compile_options\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"dev\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"||\"}),` uses_slots\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"?\"}),\" b\",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"let { $$slots: #slots = {}, $$scope } = $$props;\"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword nil null\",children:\"null\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`    ...\n`})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"    \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"instance_javascript\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`    ...\n`})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"    \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),\" before reactive declarations \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),\" props_inject\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"    \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),`\n`]})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[\"      reactive_declarations\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"length\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"&&\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[\"      b\",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token interpolation\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`    $$self.$$.update = () => {\n`})})})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token interpolation\",children:(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"reactive_declarations\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token interpolation\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`    };\n`})})})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"    \"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`    ...\n`})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"    return \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"return_value\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:`;\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`  }\n`})})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,n.jsxs)(e.div,{children:[\"\\u6211\\u4EEC\\u628Adefinition\\u548Cargs\\u6253\\u5370\\u51FA\\u6765\\u770B\\u4E0B \",(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-30.png\",width:\"1214\",height:\"238\"}),\" \\u4ECE\\u6253\\u5370\\u7ED3\\u679C\\u6211\\u4EEC\\u80FD\\u591F\\u63A8\\u65AD\\u51FA\\uFF0C\\u8FD9\\u6BB5\\u4EE3\\u7801\\u7F16\\u8BD1\\u540E\\u5BF9\\u5E94\\u7684\\u662F\",(0,n.jsx)(e.code,{children:\"function instance(){}\"})]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" superclass \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"type\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Identifier'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" options\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"dev\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"?\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'@SvelteComponentDev'\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'@SvelteComponent'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token operator spread\",children:\"...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" declaration \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsxs)(e.span,{className:\"token comment doc-comment\",children:[\"/** \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"@type\"}),\" \",(0,n.jsxs)(e.span,{className:\"token class-name\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'estree'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"ClassDeclaration\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" */\"]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  b\",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"  class \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"name\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\" extends \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"superclass\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:` {\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`    constructor(options) {\n`})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"      super(\"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"options\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"dev\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"&&\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'options'\"}),(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:`);\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"      @init(this, options, \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"definition\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\", \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),`\n`]})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[\"    has_create_fragment \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"?\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'create_fragment'\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'null'\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\", \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"not_equal\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\", \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"prop_indexes\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\", \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"optional_parameters\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:`);\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),`\n`]})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[\"        options\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"dev\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"&&\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[\"        b\",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'@dispatch_dev(\"SvelteRegisterComponent\", { component: this, tagName: \"'}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"name\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:'\", options, id: create_fragment.name });'}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`    }\n`})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`  }\n`})})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"push_array\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"declaration\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"body\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"body\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" accessors\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"body\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"push\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token comment doc-comment\",children:[\"/** \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"@type\"}),\" \",(0,n.jsxs)(e.span,{className:\"token class-name\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"any\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" */\"]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"declaration\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u8FD9\\u6BB5\\u4EE3\\u7801\\u5219\\u5BF9\\u5E94\\u7F16\\u8BD1\\u540E\\u7684\\u7EC4\\u4EF6\\u7684\\u7C7B\",(0,n.jsx)(e.code,{children:\"class X extends SvelteComponent {}\"})]}),(0,n.jsx)(e.pre,{className:\"language-diff\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-diff\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`const result =\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` options.generate === false\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   ? null\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   : options.generate === 'ssr'\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   ? render_ssr(component, options)\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   : render_dom(component, options);\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line inserted\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token prefix inserted\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:` console.log('svelte compile result', result);\n`})]})]})]})}),(0,n.jsx)(e.div,{children:(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-31.png\",width:\"1500\",height:\"1212\"})}),(0,n.jsxs)(e.h3,{className:\"content-header\",id:\"generate\",children:[(0,n.jsx)(e.a,{href:\"#generate\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.span,{className:\"content-header-link\",children:(0,n.jsxs)(e.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,n.jsx)(e.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,n.jsx)(e.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"generate\"]}),(0,n.jsx)(e.p,{children:\"\\u7EC8\\u4E8E\\u6765\\u5230\\u7F16\\u8BD1\\u7684\\u6700\\u540E\\u4E00\\u6B65\\u3002\"}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"generate\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"result\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"let\"}),\" js \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword nil null\",children:\"null\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"let\"}),\" css \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword nil null\",children:\"null\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"result\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token comment doc-comment\",children:[\"/** \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"@type\"}),\" \",(0,n.jsxs)(e.span,{className:\"token class-name\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"any\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" */\"]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" program \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"type\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Program'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"body\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" result\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"js\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"walk\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"program\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token function function-variable\",children:\"enter\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"node\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" parent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" key\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"node\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"type\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Identifier'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token operator spread\",children:\"...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token operator spread\",children:\"...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"create_module\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      program\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      name\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      banner\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      compile_options\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"sveltePath\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      imported_helpers\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      referenced_globals\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"imports\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"vars\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"filter\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"variable\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),\" variable\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"module\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"&&\"}),\" variable\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"export_name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"map\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"variable\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" variable\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"as\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" variable\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"export_name\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"exports_from\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" js_sourcemap_enabled \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"check_enable_sourcemap\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"compile_options\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"enableSourcemap\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'js'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),\"js_sourcemap_enabled\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      js \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"print\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"program\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      js\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"map\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword nil null\",children:\"null\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"else\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token operator spread\",children:\"...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    js\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    css\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"ast\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"original_ast\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"warnings\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"warnings\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"vars\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"get_vars_report\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"stats\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"stats\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"render\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"create_module\"}),\"\\u65B9\\u6CD5\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"create_module\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  program\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  name\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  banner\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  svelte_path \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'svelte'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  helpers\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  globals\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  imports\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  module_exports\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`  exports_from\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" internal_path \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"svelte_path\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:\"/internal\"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  helpers\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"sort\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"a\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" b\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"a\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"name\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),\" b\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"name\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"?\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  globals\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"sort\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"a\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" b\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"a\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"name\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),\" b\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"name\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"?\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"esm\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    program\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    name\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    banner\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    svelte_path\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    internal_path\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    helpers\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    globals\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    imports\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    module_exports\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`    exports_from\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"esm\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"program\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"  name\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"  banner\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"  svelte_path\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"  internal_path\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"  helpers\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"  globals\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"  imports\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"  module_exports\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token parameter\",children:\"  exports_from\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" import_declaration \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"type\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'ImportDeclaration'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"specifiers\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" helpers\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"map\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"h\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"type\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'ImportSpecifier'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"local\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" h\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"alias\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"imported\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"type\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Identifier'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" h\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"name\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"source\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"type\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Literal'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"value\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" internal_path \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token operator spread\",children:\"...\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  program\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"body\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" b\",(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"    /* \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"banner\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:` */\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"    \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"import_declaration\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"    \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"internal_globals\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"    \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"imports\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"    \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"exports_from\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"    \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"program\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"body\"}),(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token template-string\",children:(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"    export default \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"name\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:`;\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"    \"}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"${\"}),\"exports\",(0,n.jsx)(e.span,{className:\"token punctuation interpolation-punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:`\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"  \"}),(0,n.jsx)(e.span,{className:\"token string template-punctuation\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`})]})}),(0,n.jsxs)(e.p,{children:[\"\\u6838\\u5FC3\\u5C31\\u662F\\u7F16\\u8BD1\\u751F\\u6210\\u9875\\u9762\\u6700\\u7EC8\\u7684\",(0,n.jsx)(e.code,{children:\"import\"}),\"\\u548C\",(0,n.jsx)(e.code,{children:\"export\"}),\"\\u90E8\\u5206\\u7684\\u5185\\u5BB9\\u3002\"]}),(0,n.jsxs)(e.div,{children:[(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-32.png\",width:\"900\",height:\"676\"}),(0,n.jsx)(e.br,{}),(0,n.jsx)(e.img,{alt:\"alt text\",src:\"/images/svelte/37-33.png\"})]}),(0,n.jsx)(e.p,{children:\"\\u6211\\u4EEC\\u5C1D\\u8BD5\\u628Aimport\\u90E8\\u5206\\u7684\\u4EE3\\u7801\\u53D8\\u91CF\\u6253\\u5370\\u51FA\\u6765\\u770B\\u4E0B\\uFF1A\"}),(0,n.jsx)(e.pre,{className:\"language-diff\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-diff\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`const import_declaration = {\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` type: 'ImportDeclaration',\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` specifiers: helpers.map((h) => ({\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   type: 'ImportSpecifier',\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   local: h.alias,\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   imported: { type: 'Identifier', name: h.name }\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` })),\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` source: { type: 'Literal', value: internal_path }\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),`};\n`]}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token prefix inserted\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:` console.log('svelte import_declaration', import_declaration, helpers);\n`})]})})]})}),(0,n.jsx)(e.div,{children:(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-34.png\",width:\"1360\",height:\"626\"})}),(0,n.jsxs)(e.p,{children:[\"\\u6700\\u540E\\u7ECF\\u8FC7code-red\\u7684\",(0,n.jsx)(e.code,{children:\"print\"}),\"\\u65B9\\u6CD5\\u751F\\u6210\\u6700\\u7EC8\\u7684js\\u4EE3\\u7801\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),\"js_sourcemap_enabled\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  js \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"print\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"program\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  js\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"map\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword nil null\",children:\"null\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),` \n`]})]})}),(0,n.jsx)(e.pre,{className:\"language-diff\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-diff\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`const result =\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` options.generate === false\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   ? null\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   : options.generate === 'ssr'\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   ? render_ssr(component, options)\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   : render_dom(component, options);\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line inserted\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token prefix inserted\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:` console.log('svelte final code',\n`})]})]}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token prefix inserted\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   component.generate(result),\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token prefix inserted\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   component.generate(result).js.code\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token prefix inserted\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:` );\n`})]})})]})}),(0,n.jsxs)(e.div,{children:[(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-35.png\",width:\"1850\",height:\"290\"}),(0,n.jsx)(e.br,{}),(0,n.jsx)(e.img,{alt:\"alt text\",src:\"/images/svelte/37-36.png\"})]}),(0,n.jsxs)(e.div,{children:[\"\\u56DE\\u770B\",(0,n.jsx)(e.code,{children:\"svelte-loader\"}),\"\\u7684\\u4EE3\\u7801\\uFF0C\\u540C\\u6837\\u662F\\u8FD4\\u56DE\",(0,n.jsx)(e.code,{children:\"js.code\"}),\"\\u7684\\u4EE3\\u7801\\u3002 \",(0,n.jsx)(e.code,{children:\"https://github.com/sveltejs/svelte-loader/blob/master/index.js\"}),\" \",(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-37.png\",width:\"799\",height:\"790\"})]}),(0,n.jsxs)(e.div,{children:[\"\\u6700\\u540E\\u63D0\\u4F9B\\u4E00\\u4E2Acompile\\u9636\\u6BB5\\u7684\\u601D\\u7EF4\\u5BFC\\u56FE\\uFF1A \",(0,n.jsx)(a,{alt:\"\",src:\"/images/svelte/37-43.png\",width:\"3648\",height:\"9158\"})]}),(0,n.jsxs)(e.h2,{className:\"content-header\",id:\"runtime\",children:[(0,n.jsx)(e.a,{href:\"#runtime\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.span,{className:\"content-header-link\",children:(0,n.jsxs)(e.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,n.jsx)(e.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,n.jsx)(e.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"runtime\"]}),(0,n.jsxs)(e.p,{children:[\"\\u6211\\u4EEC\\u628A\\u5728\\u7F16\\u8BD1\\u540E\\u5F97\\u5230\\u7684js\\u4EE3\\u7801\\u590D\\u5236\\u8FDB\\u4E00\\u4E2A\\u6587\\u4EF6\\u4E2D\",(0,n.jsx)(e.code,{children:\"index.js\"}),\"\\u3002 \\u5728svelte\\u6E90\\u7801\\u9879\\u76EE\\u76EE\\u5F55\\u4E0B\\u65B0\\u5EFA\\u4E00\\u4E2A\\u76EE\\u5F55\\u53EB\",(0,n.jsx)(e.code,{children:\"test-runtime\"}),\"\\uFF0C\\u65B0\\u5EFA\\u4E00\\u4E2Aindex.html\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-html\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-html\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"<\"}),\"div\"]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"id\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"app\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"</\"}),\"div\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"<\"}),\"script\"]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"type\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"module\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"src\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"./index.js\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),(0,n.jsx)(e.span,{className:\"token script\"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"</\"}),\"script\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]})]})}),(0,n.jsx)(e.div,{children:(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-38.png\",width:\"630\",height:\"664\"})}),(0,n.jsx)(e.p,{children:\"\\u4FEE\\u6539index.js\\u7684\\u51E0\\u5904\\u5730\\u65B9\\uFF1A\"}),(0,n.jsxs)(e.ul,{children:[(0,n.jsxs)(e.li,{children:[\"\\u628A\\u5F15\\u7528\",(0,n.jsx)(e.code,{children:\"svelte/internal\"}),\"\\u7684\\u8DEF\\u5F84\\u8FDB\\u884C\\u8C03\\u6574\",(0,n.jsx)(e.code,{children:\"../packages/svelte/src/runtime/internal\"}),\"\\uFF1B\"]}),(0,n.jsxs)(e.li,{children:[\"\\u628A\",(0,n.jsx)(e.code,{children:'import \"svelte/internal/disclose-version\";'}),\"\\u79FB\\u9664\\uFF1B\"]}),(0,n.jsxs)(e.li,{children:[\"\\u6CE8\\u91CA\\u6700\\u4E0B\\u9762\\u4E00\\u884C\\u7684\",(0,n.jsx)(e.code,{children:\"export default Component\"}),\"\\uFF0C\\u6539\\u6210\\uFF1A\"]})]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Component\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"target\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token variable dom\",children:\"document\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"querySelector\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'#app'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u5728\",(0,n.jsx)(e.code,{children:\"test-runtime\"}),\"\\u76EE\\u5F55\\u4E0B\"]}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-bash\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"npm\"}),\" init \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"-y\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"npm\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"install\"}),` vite\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u5728\",(0,n.jsx)(e.code,{children:\"package.json\"}),\"\\u4E2D\\u6DFB\\u52A0\\u8FD0\\u884C\\u6307\\u4EE4\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-diff\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-diff\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`\"scripts\": {\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` \"test\": \"echo \\\\\"Error: no test specified\\\\\" && exit 1\",\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line inserted\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token prefix inserted\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:` \"dev\": \"vite\"\n`})]})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token inserted inserted-sign\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),`},\n`]})]})}),(0,n.jsxs)(e.div,{children:[(0,n.jsx)(e.code,{children:\"npm run dev\"}),\"\\u628A\\u9879\\u76EE\\u8DD1\\u8D77\\u6765\\uFF1A \",(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-39.png\",width:\"2292\",height:\"1474\"})]}),(0,n.jsxs)(e.p,{children:[\"\\u5728\",(0,n.jsx)(e.code,{children:\"runtime\"}),\"\\u9636\\u6BB5\\uFF0C\\u6211\\u4EEC\\u4E3B\\u8981\\u89C2\\u5BDF\\u6570\\u636E\\u662F\\u5982\\u4F55\\u66F4\\u65B0\\u7684\\u3002\"]}),(0,n.jsx)(e.p,{children:\"\\u9996\\u5148\\u662F\\u5F53\\u6211\\u4EEC\\u70B9\\u51FBbutton\\u65F6\"}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),\"mounted\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  dispose \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"listen\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"button\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"click\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"/*addCount*/\"}),\" ctx\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  mounted \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u8FD9\\u91CCclick\\u7ED1\\u5B9A\\u7684\\u76D1\\u542C\\u65B9\\u6CD5\\u662F\",(0,n.jsx)(e.code,{children:\"ctx[1]\"}),\"\\uFF0C\\u7ECF\\u8FC7\\u524D\\u9762\\u7684\\u5B66\\u4E60\\uFF0C\\u6211\\u4EEC\\u77E5\\u9053\\uFF0Cctx\\u6570\\u7EC4\\u5C31\\u662Finstance\\u65B9\\u6CD5\\u6267\\u884C\\u540E\\u7684\\u8FD4\\u56DE\\u503C\\u3002\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"instance\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"$$self\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" $$props\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" $$invalidate\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"let\"}),\" count \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function function-variable\",children:\"addCount\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"$$invalidate\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" count\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"++\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" count\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"count\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" addCount\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u4E5F\\u5C31\\u662F\\u6211\\u4EEC\\u70B9\\u51FB\\u6309\\u94AE\\u4E4B\\u540E\\uFF0C\\u4F1A\\u6267\\u884CaddCount\\u65B9\\u6CD5\\uFF0CaddCount\\u5185\\u90E8\\u7684\\u8D4B\\u503C\\u8BED\\u53E5\\u5DF2\\u7ECF\\u88AB\\u91CD\\u65B0\\u7F16\\u8BD1\\u540E\\uFF0C\\u53D8\\u6210\\u4E86\",(0,n.jsx)(e.code,{children:\"$$invalidate()\"}),\"\\u3002\"]}),(0,n.jsx)(e.pre,{className:\"language-diff\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-diff\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`instance(component, options.props || {}, (i, ret, ...rest) => {\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` const value = rest.length ? rest[0] : ret;\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line inserted\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token prefix inserted\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:` console.log('svelte instance $$invalidate', i, ret, rest);\n`})]})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token inserted inserted-sign\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` if ($$.ctx && not_equal($$.ctx[i], ($$.ctx[i] = value))) {\n`})]})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   if (!$$.skip_bound && $$.bound[i]) $$.bound[i](value);\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   if (ready) make_dirty(component, i);\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` }\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` return ret;\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),`})\n`]})]})}),(0,n.jsxs)(e.div,{children:[(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-40.png\",width:\"1360\",height:\"296\"}),\" i\\u662F0\\uFF0Cret\\u662F\\u672A\\u66F4\\u65B0\\u524D\\u7684\\u503C0\\uFF0Crest\\u6570\\u7EC4\\u4E2D\\u662F\\u66F4\\u65B0\\u540E\\u7684\\u503C1\\u3002 \\u7ECF\\u8FC7\",(0,n.jsx)(e.code,{children:\"not_equal\"}),\"\\u6BD4\\u8F83\\u540E0\\u548C1\\u4E0D\\u76F8\\u7B49\\uFF0C\\u89E6\\u53D1\",(0,n.jsx)(e.code,{children:\"make_dirty\"}),\"\\u3002 \\u6211\\u4EEC\\u628A\\u5269\\u4F59\\u7684\\u5173\\u952E\\u8282\\u70B9\\u90FD\\u9010\\u4E2A\\u6253\\u5370\\u51FA\\u6765\"]}),(0,n.jsx)(e.pre,{className:\"language-diff\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-diff\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`function make_dirty(component, i) {\n`}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token prefix inserted\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:` console.log('svelte make_dirty', component, i);\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token inserted inserted-sign\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` if (component.$$.dirty[0] === -1) {\n`})]})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   dirty_components.push(component);\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   schedule_update();\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   component.$$.dirty.fill(0);\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line inserted\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token prefix inserted\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   console.log('svelte component.$$.dirty before', [...component.$$.dirty]);\n`})]})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token inserted inserted-sign\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` }\n`})]})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` component.$$.dirty[(i / 31) | 0] |= 1 << i % 31;\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line inserted\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token prefix inserted\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:` console.log('svelte component.$$.dirty after', component.$$.dirty);\n`})]})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token inserted inserted-sign\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),`}\n`]})]})}),(0,n.jsx)(e.pre,{className:\"language-diff\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-diff\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`export function schedule_update() {\n`}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token prefix inserted\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:` console.log('svelte schedule_update');\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token inserted inserted-sign\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` if (!update_scheduled) {\n`})]})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   update_scheduled = true;\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   resolved_promise.then(flush);\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` }\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),`}\n`]})]})}),(0,n.jsx)(e.pre,{className:\"language-diff\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-diff\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`export function flush() {\n`}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token prefix inserted\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:` console.log('svelte flush', flushidx, dirty_components);\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token inserted inserted-sign\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` \n`})]})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` ...\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` do {\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   try {\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`     while (flushidx < dirty_components.length) {\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`       const component = dirty_components[flushidx];\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`       flushidx++;\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`       set_current_component(component);\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`       update(component.$$);\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`     }\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   } catch (e) {\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`     ...\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   }\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` }\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` ...\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),`}\n`]})]})}),(0,n.jsx)(e.pre,{className:\"language-diff\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-diff\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`function update($$) {\n`}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token prefix inserted\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:` console.log('svelte update');\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token inserted inserted-sign\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` if ($$.fragment !== null) {\n`})]})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   $$.update();\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   run_all($$.before_update);\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   const dirty = $$.dirty;\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   $$.dirty = [-1];\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   $$.fragment && $$.fragment.p($$.ctx, dirty);\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   $$.after_update.forEach(add_render_callback);\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` }\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),`}\n`]})]})}),(0,n.jsx)(e.pre,{className:\"language-diff\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-diff\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`p(ctx, [dirty]) {\n`}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token prefix inserted\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:` console.log('svelte runtime p', ctx, dirty);\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token inserted inserted-sign\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` if (dirty & /*count*/ 1) set_data(t2, /*count*/ ctx[0]);\n`})]})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),`},\n`]})]})}),(0,n.jsxs)(e.div,{children:[\"\\u5F53\\u6211\\u4EEC\\u5237\\u65B0\\u9875\\u9762\\u65F6\\uFF0C\\u6267\\u884C\\u4E86\",(0,n.jsx)(e.code,{children:\"flush\"}),\"\\uFF1A \",(0,n.jsx)(a,{alt:\"alt text\",src:\"/images/svelte/37-41.png\",width:\"1166\",height:\"302\"})]}),(0,n.jsxs)(e.p,{children:[\"\\u5F53\\u6211\\u4EEC\\u70B9\\u51FBbutton\\u8FDB\\u884C\\u66F4\\u65B0\\uFF1A \",(0,n.jsx)(e.img,{alt:\"alt text\",src:\"/images/svelte37-42.png\"})]}),(0,n.jsxs)(e.p,{children:[\"\\u9996\\u5148\\u6267\\u884C\",(0,n.jsx)(e.code,{children:\"$$invalidate\"}),\"\\uFF0C\\u7136\\u540E\\u6267\\u884C\",(0,n.jsx)(e.code,{children:\"make_dirty\"}),\"\\uFF0C\\u7136\\u540E\\u6267\\u884C\",(0,n.jsx)(e.code,{children:\"schedule_update\"}),\"\\u3002 \\u6211\\u4EEC\\u770B\\u5230\",(0,n.jsx)(e.code,{children:\"schedule_update\"}),\"\\u5185\\u90E8\\u5176\\u5B9E\\u5C31\\u662F\\u628A\",(0,n.jsx)(e.code,{children:\"flush\"}),\"\\u653E\\u5230\\u5FAE\\u4EFB\\u52A1\\u4E2D\\u6267\\u884C\\uFF0C\\u6240\\u4EE5\\u6211\\u4EEC\\u4F1A\\u5148\\u770B\\u5230\",(0,n.jsx)(e.code,{children:\"component.$$.dirty\"}),\"\\u5728\\u66F4\\u65B0\\u524D\\u7684\\u503C\\u662F\",(0,n.jsx)(e.code,{children:\"[0]\"}),\"\\uFF0C\\u7136\\u540E\\u6267\\u884C\\u4F4D\\u8FD0\\u7B97\\u4E4B\\u540E\\u53D8\\u6210\",(0,n.jsx)(e.code,{children:\"[1]\"}),\"\\u3002\\u4E4B\\u540E\\u6267\\u884C\\u5FAE\\u4EFB\\u52A1\\u4E2D\\u7684\",(0,n.jsx)(e.code,{children:\"flush\"}),\"\\uFF0C\",(0,n.jsx)(e.code,{children:\"flush\"}),\"\\u5185\\u90E8\\u8C03\\u7528\",(0,n.jsx)(e.code,{children:\"update\"}),\"\\uFF0C\\u800C\",(0,n.jsx)(e.code,{children:\"update\"}),\"\\u65B9\\u6CD5\\u5219\\u662F\\u8C03\\u7528\\u7EC4\\u4EF6\\u5185\\u7684\",(0,n.jsx)(e.code,{children:\"p\"}),\"\\u65B9\\u6CD5\\u3002\",(0,n.jsx)(e.code,{children:\"p\"}),\"\\u65B9\\u6CD5\\u4E2D\\u901A\\u8FC7\",(0,n.jsx)(e.code,{children:\"dirty & 1\"}),\"\\u7684\\u5224\\u65AD\",(0,n.jsx)(e.code,{children:\"1 & 1\"}),\"\\uFF0C\\u4ECE\\u800C\\u6267\\u884C\",(0,n.jsx)(e.code,{children:\"set_data\"}),\"\\u3002\"]}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"set_data\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"text\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" data\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  data \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"''\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"+\"}),\" data\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"text\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"data\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" data\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  text\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"data\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsxs)(e.span,{className:\"token comment doc-comment\",children:[\"/** \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"@type\"}),\" \",(0,n.jsxs)(e.span,{className:\"token class-name\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"string\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" */\"]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"data\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"set_data\"}),\"\\u65B9\\u6CD5\\u7684\\u4E3B\\u8981\\u903B\\u8F91\\u5219\\u662F\\u66F4\\u65B0text\\u8282\\u70B9\\u7684data\\u5C5E\\u6027\\u7684\\u503C\\u3002\"]}),(0,n.jsxs)(e.div,{children:[\"\\u6700\\u540E\\u4E5F\\u63D0\\u4F9B\\u4E00\\u4E2A\\u7B80\\u6613\\u7684\\u6D41\\u7A0B\\u56FE\\uFF1A \",(0,n.jsx)(a,{alt:\"\",src:\"/images/svelte/37-44.png\",width:\"1201\",height:\"781\"})]}),(0,n.jsxs)(e.h2,{className:\"content-header\",id:\"\\u5C0F\\u7ED3\",children:[(0,n.jsx)(e.a,{href:\"#\\u5C0F\\u7ED3\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.span,{className:\"content-header-link\",children:(0,n.jsxs)(e.svg,{className:\"h-5 linkicon w-5\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:[(0,n.jsx)(e.path,{d:\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}),(0,n.jsx)(e.path,{d:\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"})]})})})}),\"\\u5C0F\\u7ED3\"]}),(0,n.jsx)(e.p,{children:\"\\u672C\\u7AE0\\u6211\\u4EEC\\u5B66\\u4E60\\u4E86\\uFF1A\"}),(0,n.jsxs)(e.ul,{children:[(0,n.jsx)(e.li,{children:\"compile\\u7684\\u6267\\u884C\\u6D41\\u7A0B\"}),(0,n.jsx)(e.li,{children:\"runtime\\u7684\\u6267\\u884C\\u6D41\\u7A0B\"})]}),(0,n.jsx)(e.p,{children:\"compile\\u548Cruntime\\u7684\\u96BE\\u6613\\u7A0B\\u5EA6\\uFF0C\\u57FA\\u672C\\u7B26\\u5408\\u4E8C\\u516B\\u5B9A\\u5F8B\\uFF0C\\u767E\\u5206\\u4E4B\\u516B\\u5341\\u7684\\u5185\\u5BB9\\u90FD\\u5728\\u7F16\\u8BD1\\u5668\\u5982\\u4F55\\u89E3\\u6790Svelte\\u6587\\u4EF6\\u4E0A\\u3002\"})]})}function d(s={}){let{wrapper:e}=s.components||{};return e?(0,n.jsx)(e,{...s,children:(0,n.jsx)(p,{...s})}):p(s)}function _(s,e){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+s+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return w(x);})();\n;return Component;"
  },
  "_id": "blog/svelte/37-code-process.mdx",
  "_raw": {
    "sourceFilePath": "blog/svelte/37-code-process.mdx",
    "sourceFileName": "37-code-process.mdx",
    "sourceFileDir": "blog/svelte",
    "contentType": "mdx",
    "flattenedPath": "blog/svelte/37-code-process"
  },
  "type": "Blog",
  "readingTime": {
    "text": "26 min read",
    "minutes": 25.37,
    "time": 1522200,
    "words": 5074
  },
  "slug": "svelte/37-code-process",
  "path": "blog/svelte/37-code-process",
  "filePath": "blog/svelte/37-code-process.mdx",
  "toc": [
    {
      "value": "compile阶段",
      "url": "#compile阶段-2",
      "depth": 2
    },
    {
      "value": "parse",
      "url": "#parse-11",
      "depth": 3
    },
    {
      "value": "Component",
      "url": "#component-8",
      "depth": 3
    },
    {
      "value": "render_dom",
      "url": "#render_dom-5",
      "depth": 3
    },
    {
      "value": "generate",
      "url": "#generate-8",
      "depth": 3
    },
    {
      "value": "runtime",
      "url": "#runtime-2",
      "depth": 2
    },
    {
      "value": "小结",
      "url": "#小结-124",
      "depth": 2
    }
  ],
  "structuredData": {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "Svelte从入门到精通——流程",
    "datePublished": "2024-07-30T00:00:00.000Z",
    "dateModified": "2024-07-30T00:00:00.000Z",
    "image": "/static/images/twitter-card.png",
    "url": "https://tailwind-nextjs-starter-blog.vercel.app/blog/svelte/37-code-process"
  }
}